<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<title>Recode atau compute data</title>
<meta name="description" 
      content=""
>

  




<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link
  rel="alternate"
  type="application/rss+xml"
  href="https://yusbk.github.io/index.xml"
  title="𝔂𝓾𝓼𝓴𝓪𝓶"
/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Recode atau compute data"/>
<meta name="twitter:description" content="Ini ialah cara untuk recode atau compute data menggunakan pakej data.table.
Recode Mendukarkan nilai dikolom tanpa membuat kolom baru boleh dilakukan seperti begini. Contoh dataset yang digunakan untuk proses ini ialah DT.
library(data.table) DT &lt;- data.table(a=rep(0:1, 5), b=letters[1:10]) &gt; DT a b 1: 0 a 2: 1 b 3: 0 c 4: 1 d 5: 0 e 6: 1 f 7: 0 g 8: 1 h 9: 0 i 10: 1 j  Bagaimana untuk menukarkan kod di kolom a dari [0,1] ke [3,4]?"/>



<link rel="stylesheet" href="https://yusbk.github.io/fontawesome/css/all.min.css" />




<link
  crossorigin="anonymous"
  href="/css/styles.min.css"
  integrity=""
  rel="preload stylesheet"
  as="style"
/>




<link
  id="dark-mode-theme"
  crossorigin="anonymous"
  href="/css/dark.min.css"
  integrity=""
  rel="preload stylesheet"
  as="style"
/>


<script>
  var darkTheme = document.getElementById('dark-mode-theme')
  var storedTheme = localStorage.getItem('dark-mode-storage')

  if (storedTheme === 'dark') {
    darkTheme.disabled = false
  } else if (storedTheme === 'light') {
    darkTheme.disabled = true
  }
</script>


<script defer crossorigin="anonymous" src="/js/theme.js" integrity=""></script>


<script defer crossorigin="anonymous" src="/js/instantpage.min.js" integrity=""></script><meta name="generator" content="Hugo 0.92.2" />
  </head>
  <body>
    
  




  <header>
    <nav class="navbar">
  <div class="nav">
    
      <a href="https://yusbk.github.io/" class="nav-logo">
        <img
          src="https://yusbk.github.io/images/yk.png"
          width="40"
          height="40"
          alt="Logo"
        />
      </a>
    

    <ul class="nav-links">
      
        
          <li>
            <a href="/about" id="About"
              ><em class="fas fa-user-secret fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/categories" id="Categories"
              ><em class="fas fa-folder-open fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/tags" id="Tags"
              ><em class="fas fa-tags fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/search" id="Search"
              ><em class="fas fa-search fa-lg"></em
            ></a>
          </li>
          
      
    </ul>
  </div>
</nav>

    <div class="intro-header">
      <div class="container">
        <div class="post-heading">
          
            <h1>
              Recode atau compute data
            </h1>
          
          
            <span class="meta-post">
  <em class="fa fa-calendar-alt"></em
  >&nbsp;Jan 2, 2018
  
    &nbsp;&nbsp;&nbsp;<em class="fa fa-folder-open"></em>&nbsp;
    
      <a
        href="https://yusbk.github.io/categories/r/"
        >R</a
      >&nbsp;
    
      <a
        href="https://yusbk.github.io/categories/my/"
        >my</a
      >&nbsp;
    
      <a
        href="https://yusbk.github.io/categories/dt/"
        >DT</a
      >&nbsp;
    
  
</span>

          
        </div>
      </div>
    </div>
  </header>
  

    
  <div class="container" role="main">
    <article class="article" class="blog-post">
      
  <p>Ini ialah cara untuk <em><strong>recode</strong></em> atau <em><strong>compute</strong></em> data menggunakan pakej <code>data.table</code>.</p>
<h1 id="recode">Recode</h1>
<p>Mendukarkan nilai dikolom tanpa membuat kolom baru boleh dilakukan seperti begini. Contoh dataset yang digunakan untuk proses ini ialah <strong>DT</strong>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R"><span style="color:#a6e22e">library</span>(data.table)
DT <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.table</span>(a<span style="color:#f92672">=</span><span style="color:#a6e22e">rep</span>(<span style="color:#ae81ff">0</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">5</span>), b<span style="color:#f92672">=</span><span style="color:#66d9ef">letters</span>[1<span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>])
</code></pre></div><pre><code>&gt; DT
    a b
 1: 0 a
 2: 1 b
 3: 0 c
 4: 1 d
 5: 0 e
 6: 1 f
 7: 0 g
 8: 1 h
 9: 0 i
10: 1 j
</code></pre>
<p>Bagaimana untuk menukarkan kod di kolom <strong>a</strong> dari [0,1] ke [3,4]?</p>
<p>Cara dengan menggunakan pakej <code>data.table</code> ialah seperti begini:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">DT<span style="color:#a6e22e">[.</span>(a <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>, to <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span><span style="color:#ae81ff">4</span>), on <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;a&#34;</span>, a <span style="color:#f92672">:=</span> i.to]
</code></pre></div><p>Kolom <strong>a</strong> ditukarkan ke kod [3,4]. Pemakaian <code>a := i.to</code> untuk memastikan kolom <strong>a</strong> digantikan dengan nilai yang baru tanpa membuat kolom baru yang mengandungi nilai tersebut.</p>
<pre><code>&gt; DT
    a b
 1: 3 a
 2: 4 b
 3: 3 c
 4: 4 d
 5: 3 e
 6: 4 f
 7: 3 g
 8: 4 h
 9: 3 i
10: 4 j
</code></pre>
<h1 id="compute">Compute</h1>
<p>Membuat kolom baru berasaskan kondisi dikolom yang sedia ada. Contoh praktikal yang saya gunakan untuk memberikan nama-nama rumah sakit kolom baru iaitu <code>hosKort</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">hosNavnKort <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Akershus&#34;</span>, <span style="color:#e6db74">&#34;Forde&#34;</span>, <span style="color:#e6db74">&#34;Haugesund&#34;</span>, <span style="color:#e6db74">&#34;Haukeland&#34;</span>, <span style="color:#e6db74">&#34;Sandessjoen&#34;</span>, <span style="color:#e6db74">&#34;Finnmark&#34;</span>,
                 <span style="color:#e6db74">&#34;Kristiansund&#34;</span>, <span style="color:#e6db74">&#34;Molde&#34;</span>, <span style="color:#e6db74">&#34;Namsos&#34;</span>, <span style="color:#e6db74">&#34;Bodo&#34;</span>, <span style="color:#e6db74">&#34;Trondheim&#34;</span>,
                 <span style="color:#e6db74">&#34;Stavanger&#34;</span>, <span style="color:#e6db74">&#34;Vestfold&#34;</span>, <span style="color:#e6db74">&#34;Gjovik&#34;</span>, <span style="color:#e6db74">&#34;Lillehammer&#34;</span>, <span style="color:#e6db74">&#34;Elverum&#34;</span>, <span style="color:#e6db74">&#34;Levanger&#34;</span>,
                 <span style="color:#e6db74">&#34;Telemark&#34;</span>, <span style="color:#e6db74">&#34;Ostfold&#34;</span>,  <span style="color:#e6db74">&#34;Arendal&#34;</span>,  <span style="color:#e6db74">&#34;Kristiansand&#34;</span>, <span style="color:#e6db74">&#34;Ulleval&#34;</span>,
                 <span style="color:#e6db74">&#34;Nord_norge&#34;</span>, <span style="color:#e6db74">&#34;Harstad&#34;</span>, <span style="color:#e6db74">&#34;Drammen&#34;</span>, <span style="color:#e6db74">&#34;Alesund&#34;</span>)

<span style="color:#75715e"># hosDT[, kortID := hospID]</span>
<span style="color:#75715e"># hosDT[.(kortID = 1:26, to = hosNavnKort), on = &#34;kortID&#34;, hosKort := i.to]</span>

hosDT<span style="color:#a6e22e">[.</span>(hospID <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">26</span>, to <span style="color:#f92672">=</span> hosNavnKort), on <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hospID&#34;</span>, hosKort <span style="color:#f92672">:=</span> i.to]
</code></pre></div><p>Cara ini sama seperti melarikan cara begini:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">hosDT[hospID <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>, hosKort <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;Akershus&#34;</span>][
 hospID <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>, hosKort <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;Forde&#34;</span>][
  hospID <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span>, hosKort <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;Haugesund&#34;</span>][ dan seterusnya... ]
</code></pre></div><p>Sekiranya asas untuk menghasilkan kolom baru bergantung kepada lebih dari satu kolom boleh dibuat seperti begini.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">dd1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.table</span>(a<span style="color:#f92672">=</span><span style="color:#a6e22e">rep</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Ja&#34;</span>, <span style="color:#e6db74">&#34;Nei&#34;</span>), <span style="color:#ae81ff">5</span>), b <span style="color:#f92672">=</span> <span style="color:#a6e22e">rep</span>(<span style="color:#66d9ef">letters</span>[1<span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>],<span style="color:#ae81ff">2</span>))
</code></pre></div><p>Buat kolom <strong>c</strong> dan nilai 1 sekiranya kolom <strong>a</strong> ialah <em>Nei</em>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">dd1<span style="color:#a6e22e">[list</span>(a <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Nei&#34;</span>, to <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>), on <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;a&#34;</span>, c <span style="color:#f92672">:=</span> i.to]
</code></pre></div><p>Buat kolom <strong>d</strong> dengan nilai 2 sekiranya kolom <strong>a</strong> ialah <em>Ja</em> dan kolom <strong>b</strong> ialah <em>a</em></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">dd1<span style="color:#a6e22e">[list</span>(a<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Ja&#34;</span>, b<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;a&#34;</span>, to <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>), on <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>), d <span style="color:#f92672">:=</span> i.to]
</code></pre></div><p>Buat kolom <strong>f</strong> dengan nilai 5 sekiranya kolom <strong>a</strong> ialah <em>Ja</em> dan kolom <strong>b</strong> bernilai <em>b</em>. Sekiranya kolom <strong>a</strong> bernilai <em>Ja</em> dan kolom <strong>b</strong> bernilai <em>c</em> maka kolom <strong>f</strong> diberikan nilai 8.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">a1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>)

dd1<span style="color:#a6e22e">[.</span>(a<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Ja&#34;</span>, b <span style="color:#f92672">=</span> a1, to <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">8</span>)), on <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>), f <span style="color:#f92672">:=</span> i.to]
</code></pre></div>



      
        <div class="blog-tags">
          
            <a
              href="https://yusbk.github.io/tags/recode/"
              >recode</a
            >&nbsp;
          
            <a
              href="https://yusbk.github.io/tags/compute/"
              >compute</a
            >&nbsp;
          
        </div>
      

      
    </article>
    
    
      
  <div id="disqus_thread"></div>
  <script type="text/javascript">
        (function() {
            
            
            if (window.location.hostname == "localhost") return;

            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            var disqus_shortname = 'yusbk-github-io';
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
  <noscript
    >Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript"
      >comments powered by Disqus.</a
    ></noscript
  >
  <a href="https://disqus.com/" class="dsq-brlink"
    >comments powered by <span class="logo-disqus">Disqus</span></a
  >


    
  </div>

    <footer>
  

<div class="social-icons">
  
    
    
      
      <a href="https://twitter.com/GoHugoIO" name="twitter">
        <em class="fab fa-twitter"></em>
      </a>
    
  

  
</div>


  
  <div class="container">
    <p class="credits copyright">
      <a href="https://yusbk.github.io/about">Yusman K</a>
      &nbsp;&copy;
      2022
      
        &nbsp;/&nbsp;
        <a href="https://yusbk.github.io/">𝔂𝓾𝓼𝓴𝓪𝓶</a>
      
      &nbsp;&ndash;&nbsp;
      <em class="fas fa-moon" id="dark-mode-toggle"></em>
    </p>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
  </div>
</footer>

  </body>
</html>
