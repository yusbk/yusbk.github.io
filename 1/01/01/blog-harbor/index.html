<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<title></title>
<meta name="description" 
      content="  Penggunaan symbol-symbol singkatan di `data.table` seperti `.N, .I, .GRP, .BY`.
  Contoh-contoh yang dipakai diambil dari rujukan `data.table`.
  "
>

  




<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link
  rel="alternate"
  type="application/rss+xml"
  href="https://yusbk.github.io/index.xml"
  title="𝔂𝓾𝓼𝓴𝓪𝓶"
/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="  Penggunaan symbol-symbol singkatan di `data.table` seperti `.N, .I, .GRP, .BY`.
  Contoh-contoh yang dipakai diambil dari rujukan `data.table`.
  "/>



<link rel="stylesheet" href="https://yusbk.github.io/fontawesome/css/all.min.css" />




<link
  crossorigin="anonymous"
  href="/css/styles.min.css"
  integrity=""
  rel="preload stylesheet"
  as="style"
/>




<link
  id="dark-mode-theme"
  crossorigin="anonymous"
  href="/css/dark.min.css"
  integrity=""
  rel="preload stylesheet"
  as="style"
/>


<script>
  var darkTheme = document.getElementById('dark-mode-theme')
  var storedTheme = localStorage.getItem('dark-mode-storage')

  if (storedTheme === 'dark') {
    darkTheme.disabled = false
  } else if (storedTheme === 'light') {
    darkTheme.disabled = true
  }
</script>


<script defer crossorigin="anonymous" src="/js/theme.js" integrity=""></script>


<script defer crossorigin="anonymous" src="/js/instantpage.min.js" integrity=""></script><meta name="generator" content="Hugo 0.69.2" />
  </head>
  <body>
    
  




  <div class="intro-header"></div>


    
  <div class="container" role="main">
    <article class="article" class="blog-post">
      
  <h2 id="about">About</h2>
<p>This blog mainly aimed to be my personal reference for things that I often ended up googling
everytime I intended to use. Else I use the blog posts as a learning process for new things I found
interesting which might be useful to document from my own understanding. This elucidates the lack
of pedagogical approach in my writing as the intended audience is I myself. But if you happen to
read my posts and would like to contribute, you are very much welcome!</p>
<h2 id="posts">Posts</h2>
<h3 id="r-my">R-my</h3>
<h4 id="aliran-kerja-buat-kod-r">Aliran kerja buat kod R</h4>
<p>Bila menjalankan pembersihan dan penyusunan data adalah disarankan untuk
membuat nota-nota mengenai langkah-langkah yang diambil dalam
menyelesaikan kerja. Ini adalah sebagai nasihat berkenaan dengan aliran
kerja yang boleh dibuat supaya rujukan akan lebih jelas dan senang untuk
dipakai beberapa kali.</p>
<p>Bahagikan kerja-kerja menyusun dan membersikan data kepada bahagian
seperti berikut:</p>
<ol>
<li>Data asal (<em>raw data</em>)</li>
<li>Pemeriksaan (<em>validation</em>)</li>
<li>Pembetulan tambahan (<em>additional info.</em>)</li>
</ol>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Data asal</p>
<p>Bahagian ini ialah berkaitan dengan kerja-kerja secara langusung dari
data asal. Dimana data tersebut diambil dan sekiranya terdapat
kerja-kerja menggabungkan dengan data-data lain. Selain itu pembersihan
teknikal seperti kode yang salah.</p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Pemeriksaan</p>
<p>Ini adalah kumpulan kerja-kerja berkaitan dengan pemeriksaan data.
Contohnya umur yang melebihi 150 tahun atau ketinggian 3 meter. Adakah
informasi tersebut betul atau kesalahan semasa pendaftaran data.</p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Pembetulan tambahan</p>
<p>Data juga boleh bertukar disebabkan informasi tambahan yang diberikan
selepas kerja-kerja pembersihan dari data asal dan pemeriksaan data yang
tidak logik dibuat. Kebanyakkan pembetulan yang dibuat di sini
dijalankan secara manual dan berasaskan kepada informasi tambahan yang
tidak terdapat di data asal.</p>
</li>
</ul>
<h4 id="cara-deloy-shiny">Cara deloy Shiny</h4>
<p>Terdapat pelbagai cara untuk larikan <strong>Shiny App</strong>. Sebagai rujukan boleh
dibaca di <a href="http://shiny.rstudio.com/articles/app-formats.html">laman
Shiny</a>. Penggunaan fungsi <code>runApp()</code> dan <code>shinyAppDir()</code> akan
diterangkan disini.</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Menggunakan <code>runApp()</code></p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Satu fail <em>app.R</em></p>
<p>Untuk menggunakan fungsi <em>runApp()</em>, cara yang senang digunakan ialah
dengan menyediakan fail <em>app.R</em>. Fail ini harus mengandungi <strong>ui</strong> dan
<strong>server</strong>. Contohnya:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#a6e22e">library</span>(shiny)
  ui <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">fluidPage</span>()
  server <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(input, output) {}
  <span style="color:#a6e22e">shinyApp</span>(ui <span style="color:#f92672">=</span> ui, server <span style="color:#f92672">=</span> server)
</code></pre></div><p>Sekiranya menggunakan program <em>RStudio</em> maka butang <em>Run App</em> akan
keluar dan boleh digunakan untuk melarikan app. Sekiranya mengunakan
program lain contohnya <em>Emacs ESS</em> maka boleh larikan dengan cara :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-emacs-lisp" data-lang="emacs-lisp">  library(shiny)
  runApp(<span style="color:#e6db74">&#34;app.R&#34;</span>)
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Pelbagai fail di folder</p>
<p>Sekiranya app mengandungi kod yang panjang dimana <em>ui</em> dan <em>server</em> di
letakkan di fail-fail berasingan, fail-fail ini harus diletakkan di
folder sendiri bersama dengan fail-fail lain contohnya <em>global.R</em>,
<em>data.R</em> atau <em>module.R</em> termasuk folder <em>www</em>. Fungsi <em>shinyApp()</em>
tidak diperlukan untuk melarikan app ini. Penggunaan <em>runApp()</em> boleh
digunakan dengan menetapkan nama folder dimana fail-fail tersebut
diletakkan. Contohnya isi kandungan di folder <em>myApp</em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  /home/Git/myApp/
  ├── data.R
  ├── global.R
  ├── server.R
  ├── ui.R
  └── www
      └── custom.css
</code></pre></div><p>Folder <em>www</em> digunakan untuk menyimpan elemen-element lain seperti
gambar, javaScript, CSS dan lain-lainnya. Untuk melayarkan app boleh
dilakukan pelbagai cara. Antaranya:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-emacs-lisp" data-lang="emacs-lisp">  library(shiny)
  runApp(<span style="color:#e6db74">&#34;myApp&#34;</span>)
</code></pre></div><p>Sekiranya Shinyapps dibuat sebagai object.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  app &lt;- shinyApp(ui = ui, server = server)
  runApp(app)
</code></pre></div><p>Atau hanya terus melarikan <em>app</em> di console tanpa mengunakan <em>runApp</em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  app &lt;- shinyApp(ui = ui, server = server)
  app
</code></pre></div></li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Menggunakan <code>shinyAppDir()</code></p>
<p>Melarikan app dengan menetapkan folder sekiranya folder tidak terletak
di folder yang sedang digunakan.</p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Tips lain</p>
<p>Sekiranya ingin dapatkan <em>clientData</em> boleh menggunakan <em>session</em>.
Contohnya:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#a6e22e">function</span>(input, output, session) {
    output<span style="color:#f92672">$</span>txt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">renderPrint</span>({
      session<span style="color:#f92672">$</span>clientData
    })
  }
</code></pre></div></li>
</ul>
<h4 id="special-symbol">special symbol</h4>
<p>Hari ni bersempena <strong>Hari kemerdekaan</strong> Malaysia ada masa untuk ulang kaji pakej
<!-- raw HTML omitted -->data.table<!-- raw HTML omitted -->. Hari ni ialah mengenai <strong>Special Symbol</strong> seperti <code>.N, .I, .GRP, .BY</code>.
Penerangan ini diambil dari manual di <code>data.table</code> tetapi diedit sedikit. Untuk
rujukan di <a href="https://jangorecki.gitlab.io/data.cube/library/data.table/html/special-symbols.html">sini</a>.</p>
<p>Ini data yang dipakai untuk membuat contoh:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  DT <span style="color:#f92672">=</span> <span style="color:#a6e22e">data.table</span>(x<span style="color:#f92672">=</span><span style="color:#a6e22e">rep</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>),each<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>), v<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>), y<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">8</span>), a<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">9</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">9</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>)
  X <span style="color:#f92672">=</span> <span style="color:#a6e22e">data.table</span>(x<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;c&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>), v<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span><span style="color:#f92672">:</span><span style="color:#ae81ff">7</span>, foo<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>))
</code></pre></div><!-- raw HTML omitted -->
<ul>
<li>
<p>.N</p>
<p>Penggunaan <code>.N</code> selain dari untuk mendapatkan jumlah baris di dataset, <code>.N</code> boleh juga
digunakan untuk melihat barisan terakhir di dataset. Untuk melihat barisan pertama
guna <code>DT[1]</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  DT[.N] <span style="color:#75715e"># last row, only special symbol allowed in &#39;i&#39; - nesten som Total</span>
  DT[, .N] <span style="color:#75715e"># total number of rows in DT</span>
  DT[, .N, by<span style="color:#f92672">=</span>x] <span style="color:#75715e"># number of rows in each group</span>
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Mult</p>
<p>Contoh untuk penggunaan <code>mult</code> (<em>multiple rows</em>) adalah seperti di bawah. Penggunaan
fungsi mult ialah untuk menetapkan kombinasi barisan yang ingin ditunjukkan samada
&ldquo;all&rdquo;, &ldquo;first&rdquo; atau &ldquo;last&rdquo;. Variable <code>x</code> dan <code>y</code> boleh disusun dengan menggunakan
<code>setkey(DT, x, y)</code>. Sekiranya tidak disusun terlebih dahulu sebelum dipakai maka harus
menggunakan fungsi <code>on</code> seperti contoh di bawah.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## contoh data</span>
  dt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.table</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">7</span>),
                   y <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">6</span>))

  <span style="color:#a6e22e">setkey</span>(dt, x)

  <span style="color:#75715e">## dapatkan kombinasi yang unik</span>
  udt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">unique</span>(dt)

  <span style="color:#75715e">## buat kolom dengan nilai 0</span>
  dt[, <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;first&#34;</span>, <span style="color:#e6db74">&#34;last&#34;</span>) <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0L</span>][]
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">     x y first last
  1: 1 1     0    0
  2: 1 2     0    0
  3: 1 2     0    0
  4: 3 3     0    0
  5: 7 6     0    0
</code></pre></div><p>Menggunakan <code>mult</code> untuk menetapkan kombinasi unik yang diingini. Pemakaian <code>&quot;first&quot;</code>
menunjukkan kombinasi pertama sahaja. Sekiranya kombinasi yang sama terdapat
dipelbagai baris, hanya barisan yang pertama dimana kombinasi tersebut ditemui akan
dipilih. Pemakaian <code>&quot;last&quot;</code> memilih barisan terakhir dimana kombinasi yang diingini ditemui.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## Sekiranya kombinasi x,y yang pertama terdapat</span>
  <span style="color:#75715e">## di data masukkan 1 di kolom &#34;first&#34;</span>
  dt[udt, first <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1L</span>, on <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;x&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;first&#34;</span>][]

  <span style="color:#75715e">## Sekiranya kombinasi x,y yang terakhir terdapat</span>
  <span style="color:#75715e">## di data masukkan nilai 1 di kolom &#34;last&#34;</span>
  dt[udt, last <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1L</span>, on <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;x&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;last&#34;</span>][]
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">     x y first last
  1: 1 1     1    1
  2: 1 2     1    0
  3: 3 3     1    1
  4: 1 2     0    1
  5: 7 6     1    1
</code></pre></div><p>Contoh di bawah menunjukkan cara sekiranya hanya ingin mendapatkan index
kombinasi yang diingini sahaja.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## Untuk lihat indeks bagi kombinasi yang unik sahaja</span>
  dt<span style="color:#a6e22e">[unique</span>(dt), on <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;x&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;first&#34;</span>, which <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>]

  [1] <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">5</span>
</code></pre></div><p>Contoh lain menggunakan <code>mult</code>. Seperti kajian isi rumah (<em>household</em>) dimana &ldquo;id&rdquo;
mewakili rumah. Semua ahli keluarga mempunyai id-rumah sama. Sekiranya ingin
mencari ahli termuda atau tertua fungsi <code>mult</code> dapat memudahkan proses.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#a6e22e">set.seed</span>(<span style="color:#ae81ff">1234</span>)
  dt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.table</span>(id <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">10</span>, <span style="color:#66d9ef">TRUE</span>),
                   umur <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">20</span><span style="color:#f92672">:</span><span style="color:#ae81ff">35</span>, <span style="color:#ae81ff">10</span>, <span style="color:#66d9ef">TRUE</span>),
                   jentina <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">10</span>, <span style="color:#66d9ef">TRUE</span>),
                   kode <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">2</span>, <span style="color:#66d9ef">TRUE</span>))

  <span style="color:#75715e">## Susun umur mengikut id</span>
  <span style="color:#a6e22e">setkey</span>(dt, id, umur)

  <span style="color:#75715e">## first ialah id yang sama ahli yang paling muda</span>
  dt<span style="color:#a6e22e">[unique</span>(dt), muda <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1L</span>, on <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(id), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;first&#34;</span>][]

  <span style="color:#75715e">## Pilih yang terakhir dari id yang sama - cth utk pilih ahli tertua</span>
  <span style="color:#75715e">## sekiranya tidak pakai list di &#39;on = list(nama-var)&#39; boleh pakai &#34;nama-var&#34;.</span>
  dt<span style="color:#a6e22e">[unique</span>(dt), tua <span style="color:#f92672">:=</span> <span style="color:#a6e22e">as.integer</span>(<span style="color:#ae81ff">1L</span>), on <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;id&#34;</span>, mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;last&#34;</span>, by <span style="color:#f92672">=</span> .(umur)][]

  <span style="color:#75715e">## pilih nilai pertama untuk setiap kombinasi unik antara &#39;id&#39; dan &#39;kode&#39;</span>
  dt<span style="color:#a6e22e">[unique</span>(dt[, <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;id&#34;</span>, <span style="color:#e6db74">&#34;kode&#34;</span>)]), KodePertama <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1L</span>, on <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(id, kode), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;first&#34;</span>][]

  <span style="color:#75715e">## pilih nilai terakhir untuk setiap kombinasi unik antara &#39;id&#39; dan &#39;kode&#39;</span>
  dt<span style="color:#a6e22e">[unique</span>(dt[, <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;id&#34;</span>, <span style="color:#e6db74">&#34;kode&#34;</span>)]), KodeAkhir <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1L</span>, on <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;id&#34;</span>, <span style="color:#e6db74">&#34;kode&#34;</span>), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;last&#34;</span>][]
</code></pre></div><p>Hasilnya dari contoh pemilihan ahli yang paling muda dan tua dari data di atas
menggunakan <code>&quot;first&quot;</code> dan <code>&quot;last&quot;</code>. Pemakaian <code>unique(dt)</code> berasaskan dari penetapan yang dibuat
di fungsi <code>setkey</code> dimana data disusun mengikut <code>id</code> kemudian <code>umur</code> terlebih dahulu.</p>
<p>Sekiranya pemilihan kombinasi unik berasaskan kolom lain, selain dari <code>id</code> dan <code>umur</code>
yang telah ditetapkan, pemilihan kolom unik boleh dibuat secara fungsi asas
menggunakan <code>unique(dt[, c(&quot;kol1&quot;, &quot;kol2&quot;)])</code>. Penggunaan <code>on</code> boleh memakai cara
<code>list</code> atau <code>concatenate</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">       id umur jentina kode muda tua KodePertama KodeAkhir
   1:  1   24       2    3    1  NA           1        NA
   2:  1   24       2    2   NA  NA           1         1
   3:  1   31       1    3   NA   1          NA         1
   4:  3   22       2    3    1  NA           1        NA
   5:  3   23       1    2   NA  NA           1        NA
   6:  3   24       1    3   NA  NA          NA         1
   7:  3   28       1    2   NA  NA          NA        NA
   8:  3   33       2    2   NA  NA          NA        NA
   9:  3   34       1    2   NA   1          NA         1
  10:  4   24       1    3    1   1           1         1
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>.SD dan .SDcols</p>
<p>Penggunaan <code>.SD</code> juga boleh berasaskan <em>indeks barisan</em>. Contoh untuk menggunakan <code>.SDcols</code>
seperti di bawah termasuk menggunakan fungsi <code>lapply</code>. Tetapi penggunaan <code>&quot;.SD&quot;</code> adalah
lebih lambat berbanding menggunakan fungsi <code>&quot;on&quot;</code> seperti di atas.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e"># pilih kolom &#39;x&#39; dan &#39;y&#39;</span>
  DT[, .SD, .SDcols <span style="color:#f92672">=</span> x<span style="color:#f92672">:</span>y]
  <span style="color:#75715e"># baris pertama di semua kolom</span>
  DT[, .SD[1]]
  <span style="color:#75715e"># baris pertama di &#39;y&#39; dan &#39;v&#39; untuk setiap kumpulan di &#39;x&#39;</span>
  DT[, .SD[1], by <span style="color:#f92672">=</span> x]
  <span style="color:#75715e"># get rows *and* sum all col</span>
  DT[, <span style="color:#a6e22e">c</span>(.N, <span style="color:#a6e22e">lapply</span>(.SD, sum)), by <span style="color:#f92672">=</span> x]
  <span style="color:#75715e"># get rows *and* sum columns &#39;v&#39; and &#39;y&#39; by group</span>
  DT[, <span style="color:#a6e22e">c</span>(.N, <span style="color:#a6e22e">lapply</span>(.SD, sum)), by <span style="color:#f92672">=</span> x, .SDcol <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;v&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>)]
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>.I</p>
<p>Untuk dapatkan <em>indeks barisan</em> simbol <code>.I</code> boleh dipakai. Hanya vektor untuk indeks
barisan yang akan diberikan dan tidak nilai di indeks tersebut. Fungsinya sama
seperti <code>seq_len(nrow(x))</code>. Semasa penggumpulan dibuat, pada masa yang sama
penggumpulan dilakukan di dalam kumpulan yang ditetapkan. Sesuai digunakan untuk
membuat <em>subset</em> di <code>j</code> seperti: <code>DT[,.I[which.max(somecol)], by=grp]</code>. Penggunaannya
same seperti fungsi <code>which</code> di base.</p>
<p>Cara lain boleh digunakan untuk membuat indentity atau ID. <code>DT[, id := .I]</code>
seperti menggunakan <code>DT[, id := seq_len(.N)</code></p>
<p>Pemakaian <code>.I[1]</code> contohny digunakan untuk mendapatkan index dimana nilai pertama
bagi setiap kumpulan di <code>x</code>. Untuk kumpulan <code>b</code> di kolom <code>x</code>, nilai pertama ialah di
barisan <strong>1</strong>, nilai pertama bagi kumpulan <code>a</code> di kolom <code>x</code> ialah di barian ke <strong>4</strong> dan
nilai pertama kumpulan <code>c</code> di barisan ke <strong>7</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  DT
     x v y a b
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">9</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">7</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">6</span>
  <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">5</span>
  <span style="color:#ae81ff">6</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">4</span>
  <span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">9</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">9</span> <span style="color:#ae81ff">1</span>

  DT[, .I[1], by <span style="color:#f92672">=</span> x] <span style="color:#75715e"># first row number in DT corresponding to each group</span>

     x V1
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> b  <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> a  <span style="color:#ae81ff">4</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> c  <span style="color:#ae81ff">7</span>

  DT[, .(index <span style="color:#f92672">=</span> .I[1]), by <span style="color:#f92672">=</span> x] <span style="color:#75715e"># Namakan variable untuk index</span>

     x index
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">4</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">7</span>     <span style="color:#ae81ff">5</span>
</code></pre></div><p>Untuk dapatkan index bagi nilai maksimum mengikut kumpulan di kolom <code>x</code> boleh dibuat
seperti cara di bawah.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  DT[, .I<span style="color:#a6e22e">[which.max</span>(y)], by <span style="color:#f92672">=</span> x] <span style="color:#75715e"># which row number with the max &#39;y&#39; by &#39;x&#39;</span>

     x V1
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> b  <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> a  <span style="color:#ae81ff">5</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> c  <span style="color:#ae81ff">9</span>
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>.GRP dan rleid</p>
<p>Untuk mengkaji menggikut kumpulan secara penyusunan.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  DT[, grp <span style="color:#f92672">:=</span> .GRP, by <span style="color:#f92672">=</span> x][] <span style="color:#75715e"># add a group counter</span>

     x v y a b grp
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">9</span>   <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span>   <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">7</span>   <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">6</span>   <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">5</span>   <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">6</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">4</span>   <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">3</span>   <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">9</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">9</span> <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">3</span>

  DT[, .N, by <span style="color:#f92672">=</span> <span style="color:#a6e22e">rleid</span>(v)] <span style="color:#75715e"># get count of consecutive runs of &#39;v&#39;</span>

     rleid N
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">2</span>

  DT[, <span style="color:#a6e22e">c</span>(.(ym <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>(y)), <span style="color:#a6e22e">lapply</span>(.SD, min)), by <span style="color:#f92672">=</span> <span style="color:#a6e22e">rleid</span>(v), .SDcols <span style="color:#f92672">=</span> v<span style="color:#f92672">:</span>b] <span style="color:#75715e"># compute &#39;j&#39; for each consecutive runs of &#39;v&#39;</span>

     rleid ym v y a b
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">7</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">1</span>
</code></pre></div><p>Untuk gabungkan dua dataset. Tapi cara ini masih tidak difahami :-(</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  X

     x v foo
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">8</span>   <span style="color:#ae81ff">4</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">7</span>   <span style="color:#ae81ff">2</span>

  <span style="color:#75715e">## need more info for this</span>
  X[, DT[.BY, y, on <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;x&#34;</span>], by <span style="color:#f92672">=</span> x] <span style="color:#75715e"># join within each group</span>

     x V1
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> c  <span style="color:#ae81ff">6</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> c  <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> c  <span style="color:#ae81ff">7</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> b  <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span> b  <span style="color:#ae81ff">6</span>
  <span style="color:#ae81ff">6</span><span style="color:#f92672">:</span> b  <span style="color:#ae81ff">3</span>
</code></pre></div><p>Untuk tukar nilai bagi setiap barisan pertama di kumpulan yang sama. Ini biasanya
dipakai contohnya bila membuat kajian keluarga dan ingin memberikan kod tertentu yang
membezakan keluarga 1 dan 2 dsb.</p>
<p>Cara ini tidak <strong>hard code</strong> data. Kolom <code>c</code> tidak dimasukkan ke data dan hanya
disimpan di <em>memory</em> sahaja. Untuk simpan harus <em>assign to save object</em> atau gunakan cara <code>mult</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## Recode to 99 for first row in each group by x</span>
  DT[, {vDT <span style="color:#f92672">=</span> <span style="color:#a6e22e">copy</span>(.SD) <span style="color:#75715e">#kopi semua kolom</span>
        vDT[1, c <span style="color:#f92672">:=</span> <span style="color:#ae81ff">99</span>] <span style="color:#75715e">#buat kolom C row pertama nilai 99</span>
        vDT},
        by <span style="color:#f92672">=</span> x]

     x v y a b grp  c
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">9</span>   <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">99</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span>   <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">NA</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">7</span>   <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">NA</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">6</span>   <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">99</span>
  <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">5</span>   <span style="color:#ae81ff">2</span> <span style="color:#66d9ef">NA</span>
  <span style="color:#ae81ff">6</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">4</span>   <span style="color:#ae81ff">2</span> <span style="color:#66d9ef">NA</span>
  <span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">3</span>   <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">99</span>
  <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">NA</span>
  <span style="color:#ae81ff">9</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">9</span> <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">NA</span>

  DT<span style="color:#a6e22e">[unique</span>(x), d<span style="color:#f92672">:=</span><span style="color:#ae81ff">99</span>, on <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;x&#34;</span>, mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;first&#34;</span>][]
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Contoh dari manual</p>
<p>Ini ialah contoh dan penerangan dari manual sekiranya penerangan diatas tidak difahami.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## Not run:</span>
  DT <span style="color:#f92672">=</span> <span style="color:#a6e22e">data.table</span>(x<span style="color:#f92672">=</span><span style="color:#a6e22e">rep</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>),each<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>), v<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>), y<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">6</span>), a<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">9</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">9</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>)
  DT
  X <span style="color:#f92672">=</span> <span style="color:#a6e22e">data.table</span>(x<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;c&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>), v<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span><span style="color:#f92672">:</span><span style="color:#ae81ff">7</span>, foo<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>))
  X

  DT[.N]                                 <span style="color:#75715e"># last row, only special symbol allowed in &#39;i&#39;</span>
  DT[, .N]                               <span style="color:#75715e"># total number of rows in DT</span>
  DT[, .N, by<span style="color:#f92672">=</span>x]                         <span style="color:#75715e"># number of rows in each group</span>
  DT[, .SD, .SDcols<span style="color:#f92672">=</span>x<span style="color:#f92672">:</span>y]                 <span style="color:#75715e"># select columns &#39;x&#39; and &#39;y&#39;</span>
  DT[, .SD[1]]                           <span style="color:#75715e"># first row of all columns</span>
  DT[, .SD[1], by<span style="color:#f92672">=</span>x]                     <span style="color:#75715e"># first row of &#39;y&#39; and &#39;v&#39; for each group in &#39;x&#39;</span>
  DT[, <span style="color:#a6e22e">c</span>(.N, <span style="color:#a6e22e">lapply</span>(.SD, sum)), by<span style="color:#f92672">=</span>x]    <span style="color:#75715e"># get rows *and* sum all columns by group</span>
  DT[, .I[1], by<span style="color:#f92672">=</span>x]                      <span style="color:#75715e"># row number in DT corresponding to each group starting point</span>
  DT[, .N, by<span style="color:#f92672">=</span><span style="color:#a6e22e">rleid</span>(v)]                  <span style="color:#75715e"># get count of consecutive runs of &#39;v&#39;</span>
  DT[, <span style="color:#a6e22e">c</span>(.(y<span style="color:#f92672">=</span><span style="color:#a6e22e">max</span>(y)), <span style="color:#a6e22e">lapply</span>(.SD, min)),
          by<span style="color:#f92672">=</span><span style="color:#a6e22e">rleid</span>(v), .SDcols<span style="color:#f92672">=</span>v<span style="color:#f92672">:</span>b]      <span style="color:#75715e"># compute &#39;j&#39; for each consecutive runs of &#39;v&#39;</span>
  DT[, grp <span style="color:#f92672">:=</span> .GRP, by<span style="color:#f92672">=</span>x]                <span style="color:#75715e"># add a group counter</span>
  X[, DT[.BY, y, on<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;x&#34;</span>], by<span style="color:#f92672">=</span>x]          <span style="color:#75715e"># join within each group</span>

  <span style="color:#75715e">## End(Not run)</span>
</code></pre></div></li>
</ul>
<h4 id="test-figure">Test figure</h4>
<p>Percobaan untuk memasukkan gambar di post dan penetapan size.</p>
<figure>
    <img src="/images/plot.jpg"
         alt="Test figure" width="400"/> 
</figure>

<h4 id="susun-factor">Susun factor</h4>
<p>Bila buat bar plot cara asas di R atau menggunakan pakej <code>ggplot2</code>, susunan levels di
x-aksis disusun semula menggikut abjad. Oleh sebab itu sekiranya ingin menyusun
mengikut aturcara tertentu, levels di x-aksis harus disusun semula. Pelbagai cara
untuk menyusun variable boleh dibuat contohnya menggunakan <code>order</code> (dari &ldquo;base&rdquo;) dan
<code>reorder</code> (dari &ldquo;stat&rdquo;). Kedua-dua fungsi ini sudah tersedia di R tanpa perlu memuat
turun sebarang pakej.</p>
<p>Cara <code>reorder</code> adalah yang paling mudah tetapi agak lambat berbanding <code>order</code> sekiranya
ingin dipakai untuk fungsi di <strong>Big Data</strong>.</p>
<p>Untuk memakai cara <code>order</code> dari &ldquo;base&rdquo;. Dengan menggunakan <code>with</code> akan lebih
mempercepatkan proses:</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Susun ketinggian bar</p>
<p>Cara untuk menyusun bar menaik atau menurun</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## data</span>
  data <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(a <span style="color:#f92672">=</span> <span style="color:#66d9ef">LETTERS</span>[1<span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>], b <span style="color:#f92672">=</span> <span style="color:#a6e22e">rnorm</span>(<span style="color:#ae81ff">10</span>, mean <span style="color:#f92672">=</span> <span style="color:#ae81ff">30</span>, sd <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>),
                     c <span style="color:#f92672">=</span> <span style="color:#a6e22e">runif</span>(<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">50</span>), d <span style="color:#f92672">=</span> <span style="color:#66d9ef">letters</span>[1<span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>],
                     e <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">100</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>, replace <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>))

  <span style="color:#75715e">## susun &#34;a&#34; mengikut nilai &#34;b&#34; menaik</span>
  data<span style="color:#f92672">$</span>a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">factor</span>(data<span style="color:#f92672">$</span>a, levels <span style="color:#f92672">=</span> data<span style="color:#f92672">$</span>a<span style="color:#a6e22e">[order</span>(data<span style="color:#f92672">$</span>b)])

  <span style="color:#75715e">## susun &#34;a&#34; mengikut nilai &#34;b&#34; menurun</span>
  data<span style="color:#f92672">$</span>a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">factor</span>(data<span style="color:#f92672">$</span>a, levels <span style="color:#f92672">=</span> data<span style="color:#f92672">$</span>a<span style="color:#a6e22e">[order</span>(data<span style="color:#f92672">$</span>b, decreasing <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)])

  <span style="color:#75715e">## Buat plot</span>
  <span style="color:#a6e22e">library</span>(ggplot2)
  data2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">copy</span>(data)
  <span style="color:#a6e22e">ggplot</span>(data2, <span style="color:#a6e22e">aes</span>(a, b)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_bar</span>(stat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;identity&#39;</span>)
</code></pre></div><figure>
    <img src="/images/plotdic.png" width="350px"/> 
</figure>

<p>Bila menggunakan <code>with</code>, penulisan kode juga akan lebih mudah. Contohnya:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  data<span style="color:#f92672">$</span>d <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">with</span>(data2, <span style="color:#a6e22e">factor</span>(d, levels <span style="color:#f92672">=</span> d<span style="color:#a6e22e">[order</span>(e, decreasing <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>)]))
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Nama di aksis</p>
<p>Sekiranya ingin menyusun x-aksis mengikut cara lain selain dari nilai menurun atau
menaik melalui pilihan <code>decreasing = TRUE</code>, boleh juga menetapkan susunan cara
manual. Bila memakai cara ini harus memberikan nama susunan dengan tepat seperti nama
di variable.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## contoh data</span>
  data3 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.frame</span>(a <span style="color:#f92672">=</span> <span style="color:#66d9ef">LETTERS</span>[1<span style="color:#f92672">:</span><span style="color:#ae81ff">4</span>], b <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">20</span><span style="color:#f92672">:</span><span style="color:#ae81ff">50</span>, size <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>))
  <span style="color:#75715e">## Susun cara sendiri</span>
  data3<span style="color:#f92672">$</span>a <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">factor</span>(data3<span style="color:#f92672">$</span>a, levels <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;B&#34;</span>, <span style="color:#e6db74">&#34;D&#34;</span>, <span style="color:#e6db74">&#34;A&#34;</span>, <span style="color:#e6db74">&#34;C&#34;</span>))
  <span style="color:#75715e">## plot</span>
  <span style="color:#a6e22e">ggplot</span>(data3, <span style="color:#a6e22e">aes</span>(a, b)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">geom_bar</span>(stat <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;identity&#39;</span>)
</code></pre></div><figure>
    <img src="/images/plotaksis.jpg"/> 
</figure>

<p>Untuk memakai cara <code>reorder</code> dari &ldquo;stat&rdquo;:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## pakai data sama seperti di atas cumpa pakai factor &#34;d&#34; dan nilai &#34;e&#34;</span>
  data<span style="color:#f92672">$</span>d <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">reorder</span>(data<span style="color:#f92672">$</span>d, data<span style="color:#f92672">$</span>e)
</code></pre></div><p>Cara lain untuk menyusun semula faktor variable menggikut susunan tertentu boleh juga
dilaksanakan dengan menggunakan fungsi <code>fct_reorder</code> atau <code>fct_reorder2</code> dari pakej
<code>fotcats</code> yang boleh dibaca di <a href="https://github.com/tidyverse/forcats">sini</a>. Pakej ini juga ialah sebahagian daripada pakej
<code>tidyverse</code> yang mengandungi pakej-pakej lain seperti <code>dplyr</code> dan <code>ggplot2</code>.</p>
</li>
</ul>
<h3 id="r-en">R-en</h3>
<h4 id="basic-use-of-drake">Basic use of drake</h4>
<p>There are various ways to organise your R workflow. If you are working with a
big project, then <a href="https://airflow.apache.org/">Airflow</a> might be for you. But for the majority of R project
codes, <a href="https://books.ropensci.org/drake/">drake</a> package will fullfilled your need.</p>
<p>Here is the basic use of <code>drake</code>. The example here will be using a simple
collections of functions.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  fun1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">globalenv</span>()<span style="color:#f92672">$</span>x){
    x <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>
  }

  fun2 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(i <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>){
    i <span style="color:#f92672">*</span> <span style="color:#ae81ff">10</span>
  }

  fun3 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(){
    x1 <span style="color:#f92672">=</span> <span style="color:#a6e22e">fun1</span>()
    x2 <span style="color:#f92672">=</span> <span style="color:#a6e22e">fun2</span>(<span style="color:#ae81ff">5</span>)

    x1 <span style="color:#f92672">+</span> x2
  }

  fun4 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(z <span style="color:#f92672">=</span> <span style="color:#a6e22e">globalenv</span>()<span style="color:#f92672">$</span>z){
    x1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> z
    x2 <span style="color:#f92672">=</span> <span style="color:#a6e22e">fun2</span>(<span style="color:#ae81ff">2</span>)
    x3 <span style="color:#f92672">=</span> <span style="color:#a6e22e">fun3</span>()

    x1 <span style="color:#f92672">+</span> x2 <span style="color:#f92672">+</span> x3
  }
</code></pre></div><p>Install <code>drake</code> development version in Github <a href="https://github.com/ropensci/drake">here</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  remotes<span style="color:#f92672">::</span><span style="color:#a6e22e">install_github</span>(<span style="color:#e6db74">&#34;ropensci/drake&#34;</span>)
  <span style="color:#a6e22e">library</span>(drake)

  x <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
  z <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>

  plan <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">drake_plan</span>(
    output <span style="color:#f92672">=</span> <span style="color:#a6e22e">fun4</span>()
  )

  <span style="color:#a6e22e">make</span>(plan)
</code></pre></div><p>Running <code>make(plan)</code> will give the overview what is in the plan, sort of like using <code>Make</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  ▶ target x
  ▶ target z
  ▶ target output
</code></pre></div><p>Then you can make the interactive network to see all the workflow. This can be done several ways.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#a6e22e">library</span>(<span style="color:#e6db74">&#34;visNetwork&#34;</span>)
  <span style="color:#a6e22e">vis_drake_graph</span>(plan, full_legend <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)

  <span style="color:#75715e">## need networkD3 package</span>
  <span style="color:#a6e22e">library</span>(networkD3)
  <span style="color:#a6e22e">sankey_drake_graph</span>(plan)

  <span style="color:#a6e22e">library</span>(ggraph)
  <span style="color:#a6e22e">drake_ggraph</span>(plan)

  <span style="color:#75715e">## To show only target and dependency</span>
  <span style="color:#a6e22e">plot</span>(plan)

  <span style="color:#75715e">## read the build target</span>
  <span style="color:#a6e22e">readd</span>(output)
</code></pre></div><p>This how it looks like using <code>vis_drake_graph</code>. For interactive can be seen <a href="https://yusbk.github.io/drake%5Fexample.html">here</a>.</p>
<figure>
    <img src="/images/drake.png"
         alt="drake network" width="500"/> 
</figure>

<h4 id="connect-to-ms-access-db"><!-- raw HTML omitted -->DONE<!-- raw HTML omitted --> Connect to MS Access DB</h4>
<p><em>This article first published in 02.10.2020.</em></p>
<p>Before connecting to your Access DBMS via Windows OS, you can check if you have the MS Access driver
installed in your machine by running</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## List everything</span>
  odbc<span style="color:#f92672">::</span><span style="color:#a6e22e">odbcListDrivers</span>()

  <span style="color:#75715e">## You will get the results someting like this..</span>
  <span style="color:#75715e">## ... truncated</span>
  <span style="color:#ae81ff">26</span>               Microsoft Access <span style="color:#a6e22e">Driver </span>(<span style="color:#f92672">*</span>.mdb, <span style="color:#f92672">*</span>.accdb)        FileUsage
  <span style="color:#ae81ff">27</span>               Microsoft Access <span style="color:#a6e22e">Driver </span>(<span style="color:#f92672">*</span>.mdb, <span style="color:#f92672">*</span>.accdb)        FileExtns
  <span style="color:#ae81ff">28</span>               Microsoft Access <span style="color:#a6e22e">Driver </span>(<span style="color:#f92672">*</span>.mdb, <span style="color:#f92672">*</span>.accdb)         SQLLevel
  <span style="color:#ae81ff">29</span> Microsoft Excel <span style="color:#a6e22e">Driver </span>(<span style="color:#f92672">*</span>.xls, <span style="color:#f92672">*</span>.xlsx, <span style="color:#f92672">*</span>.xlsm, <span style="color:#f92672">*</span>.xlsb)       UsageCount
  <span style="color:#ae81ff">30</span> Microsoft Excel <span style="color:#a6e22e">Driver </span>(<span style="color:#f92672">*</span>.xls, <span style="color:#f92672">*</span>.xlsx, <span style="color:#f92672">*</span>.xlsm, <span style="color:#f92672">*</span>.xlsb)         APILevel
  <span style="color:#ae81ff">31</span> Microsoft Excel <span style="color:#a6e22e">Driver </span>(<span style="color:#f92672">*</span>.xls, <span style="color:#f92672">*</span>.xlsx, <span style="color:#f92672">*</span>.xlsm, <span style="color:#f92672">*</span>.xlsb) ConnectFunctions

  <span style="color:#75715e">## List only the driver</span>
  <span style="color:#a6e22e">sort</span>(<span style="color:#a6e22e">unique</span>(<span style="color:#a6e22e">odbcListDrivers</span>()[[1]]))

  [1] <span style="color:#e6db74">&#34;Microsoft Access dBASE Driver (*.dbf, *.ndx, *.mdx)&#34;</span>
  [2] <span style="color:#e6db74">&#34;Microsoft Access Driver (*.mdb, *.accdb)&#34;</span>
  [3] <span style="color:#e6db74">&#34;Microsoft Access Text Driver (*.txt, *.csv)&#34;</span>
  [4] <span style="color:#e6db74">&#34;Microsoft Excel Driver (*.xls, *.xlsx, *.xlsm, *.xlsb)&#34;</span>
  [5] <span style="color:#e6db74">&#34;ODBC Driver 13 for SQL Server&#34;</span>
  [6] <span style="color:#e6db74">&#34;SQL Server&#34;</span>
  [7] <span style="color:#e6db74">&#34;SQL Server Native Client 11.0&#34;</span>
</code></pre></div><p>If you don&rsquo;t get similar results then you have to set it up with this <a href="https://docs.microsoft.com/en-us/sql/odbc/admin/odbc-data-source-administrator?redirectedfrom=MSDN&amp;view=sql-server-ver15">instruction</a>. If you have
trouble setting up <em>Data Source Name</em> (DSN) then you could try accessing the odbc driver by going to
<em>control panel</em> -&gt; <em>administrative tools</em> -&gt; select <em>data sources(ODBC)</em> -&gt; right click the file -&gt; go to
properties -&gt; in the shortcut tab -&gt; change the path from %windir%System32odbcad32.exe to
%windir%SysWOW64odbcad32.exe. The reference is from <a href="https://www.yellowfinbi.com/resources/forum/yfforum-how-do-i-setup-the-dsn-for-microsoft-access-odbc-driver-thread-103711">here</a>.</p>
<p>Several packages can be used to access your data in your DBMS. I have used <a href="https://cran.r-project.org/web/packages/RODBC/index.html">RODBC</a> and <a href="https://db.rstudio.com/dbi/">DBI</a>. Here is
some examples how I have used them to connect to MS Access DBMS.</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>DBI</p>
<p>You need both <strong>DBI</strong> and <strong>odbc</strong> packages. Basically <strong>odbc</strong> is the connecting bridge from your R codes to
Access file and <strong>DBI</strong> is the guy who do the actual work. I have to use a complete <em>.connection_string</em>
to make it works.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  pkg <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;odbc&#34;</span>, <span style="color:#e6db74">&#34;DBI&#34;</span>, <span style="color:#e6db74">&#34;glue&#34;</span>)
  <span style="color:#a6e22e">sapply</span>(pkg, require, character.only <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>)

  db_con <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=&#34;</span>
  MDBPATH <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;C:\\enc\\DBtest\\STYRING\\KHELSA_dev.accdb&#34;</span>

  cs <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste0</span>(db_con, MDBPATH)
  con <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">dbConnect</span>(odbc<span style="color:#f92672">::</span><span style="color:#a6e22e">odbc</span>(), .connection_string <span style="color:#f92672">=</span> cs)
  tblCols <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;FILID&#34;</span>,<span style="color:#e6db74">&#34;FILNAVN&#34;</span>, <span style="color:#e6db74">&#34;FORMAT&#34;</span>)
  orgTb <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;ORIGINALFILER&#34;</span>
  sqq <span style="color:#f92672">&lt;-</span> glue<span style="color:#f92672">::</span><span style="color:#a6e22e">glue_sql</span>(<span style="color:#e6db74">&#34;SELECT TOP 5 {`tblCols`*}
</span><span style="color:#e6db74">                         FROM {`orgTb`}&#34;</span>,
                        .con <span style="color:#f92672">=</span> DBI<span style="color:#f92672">::</span><span style="color:#a6e22e">ANSI</span>())

  <span style="color:#75715e">## for interactive use dbGetquery</span>
  DBI<span style="color:#f92672">::</span><span style="color:#a6e22e">dbGetQuery</span>(con, sqq)

  <span style="color:#75715e">## dbSendQuery should use dbFetch and dbClearResult</span>
  rq <span style="color:#f92672">&lt;-</span> DBI<span style="color:#f92672">::</span><span style="color:#a6e22e">dbSendQuery</span>(con, )
  DBI<span style="color:#f92672">::</span><span style="color:#a6e22e">dbFetch</span>(rq)
  DBI<span style="color:#f92672">::</span><span style="color:#a6e22e">dbClearResult</span>(rq)

  DBI<span style="color:#f92672">::</span><span style="color:#a6e22e">dbDisconnect</span>(con)
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>RODBC</p>
<p>This is how I use this package.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#a6e22e">library</span>(RODBC)
  <span style="color:#75715e">## Set up driver info and database path</span>
  DRIVERINFO <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=&#34;</span>

  <span style="color:#75715e">## accdb file</span>
  MDBPATH <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;C:\\enc\\DBtest\\STYRING\\KHELSA_dev2.accdb&#34;</span>
  PATH <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste0</span>(DRIVERINFO, MDBPATH)

  <span style="color:#75715e">## Establish connection</span>
  channel <span style="color:#f92672">&lt;-</span> RODBC<span style="color:#f92672">::</span><span style="color:#a6e22e">odbcDriverConnect</span>(PATH)

  <span style="color:#75715e">## Load data into R dataframe</span>
  RODBC<span style="color:#f92672">::</span><span style="color:#a6e22e">sqlQuery</span>(channel, <span style="color:#e6db74">&#34;SELECT TOP 5 * FROM KH_DELER&#34;</span>)
  RODBC<span style="color:#f92672">::</span><span style="color:#a6e22e">sqlFetch</span>(channel, <span style="color:#e6db74">&#34;KH_DELER&#34;</span>, max <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>)

  <span style="color:#75715e">## Close and remove channel</span>
  <span style="color:#a6e22e">close</span>(channel)
  <span style="color:#a6e22e">rm</span>(channel)
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>R6 Class</p>
<p>To implement R6 Class with connection to database could be basically done as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#a6e22e">library</span>(R6)

  HelseProfil <span style="color:#f92672">&lt;-</span> R6<span style="color:#f92672">::</span><span style="color:#a6e22e">R6Class</span>(
                       classname <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;HelseProfil&#34;</span>,
                       class <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>,
                       cloneable <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>,
                       public <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(
                         dbname <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
                         dbconn <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>,
                         initialize <span style="color:#f92672">=</span> <span style="color:#a6e22e">function</span>(dbname <span style="color:#f92672">=</span> <span style="color:#66d9ef">NULL</span>){
                           <span style="color:#a6e22e">if </span>(<span style="color:#a6e22e">is.null</span>(dbname)) <span style="color:#a6e22e">return</span>(<span style="color:#a6e22e">message</span>(<span style="color:#e6db74">&#34;&gt;&gt;&gt; DB name is missing!&#34;</span>))
                           else {
                             self<span style="color:#f92672">$</span>dbname <span style="color:#f92672">&lt;-</span> dbname
                           }
                         },
                         db_connect <span style="color:#f92672">=</span> <span style="color:#a6e22e">function</span>(){
                           <span style="color:#a6e22e">stopifnot</span>(<span style="color:#f92672">!</span><span style="color:#a6e22e">is.null</span>(self<span style="color:#f92672">$</span>dbname))
                           cs <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">paste0</span>(private<span style="color:#f92672">$</span>..drv, self<span style="color:#f92672">$</span>dbname)
                           self<span style="color:#f92672">$</span>dbconn <span style="color:#f92672">&lt;-</span> DBI<span style="color:#f92672">::</span><span style="color:#a6e22e">dbConnect</span>(odbc<span style="color:#f92672">::</span><span style="color:#a6e22e">odbc</span>(),
                                                         .connection_string <span style="color:#f92672">=</span> cs,
                                                         encoding <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;latin1&#34;</span>)
                         },
                         db_close <span style="color:#f92672">=</span> <span style="color:#a6e22e">function</span>(){
                           DBI<span style="color:#f92672">::</span><span style="color:#a6e22e">dbDisconnect</span>(self<span style="color:#f92672">$</span>dbconn)
                         }
                       ),
                       private <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(
                         ..drv <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=&#34;</span>,
                         finalize <span style="color:#f92672">=</span> <span style="color:#a6e22e">function</span>(){
                           DBI<span style="color:#f92672">::</span><span style="color:#a6e22e">dbDisconnect</span>(self<span style="color:#f92672">$</span>dbconn)
                         }
                       )
                     )
</code></pre></div><p>Here I actively disable <code>class</code> and <code>cloneable</code> for speed which you can read from <a href="https://r6.r-lib.org/articles/Performance.html">R&amp; document</a>.</p>
</li>
</ul>
<h4 id="case-when"><!-- raw HTML omitted -->DONE<!-- raw HTML omitted --> Case when</h4>
<p>It&rsquo;s often easier to use <code>ifelse</code> to implement conditioning. The fast implementation in <em>data.table</em>
of <code>ifelse</code> is <a href="https://rdrr.io/github/Rdatatable/data.table/man/fifelse.html">fifelse</a>. Other approach to do multiple conditioning is to use <code>data.table::fcase</code> or
<code>dplyr::case_when</code>.</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>fcase</p>
<p><code>fcase</code> can be used directly</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  x <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">6</span>
  data.table<span style="color:#f92672">::</span><span style="color:#a6e22e">fcase</span>(x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>,
                    x <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">2</span>)
</code></pre></div><p>To implement in a <em>data.table</em> to create a new columns</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#a6e22e">library</span>(data.table)

  dt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.table</span>(v1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">letters</span>[1<span style="color:#f92672">:</span><span style="color:#ae81ff">6</span>],
                   v2 <span style="color:#f92672">=</span> <span style="color:#a6e22e">rep</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>),
                   v3 <span style="color:#f92672">=</span> <span style="color:#a6e22e">rep</span>(<span style="color:#66d9ef">LETTERS</span>[1<span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>], <span style="color:#ae81ff">2</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  &gt; dt
     v1 v2 v3
  1:  a  1  A
  2:  b  2  B
  3:  c  1  C
  4:  d  2  A
  5:  e  1  B
  6:  f  2  C
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  dt[, v4 <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fcase</span>(v1 <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;a&#34;</span> <span style="color:#f92672">&amp;</span> v3 <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;A&#34;</span>, <span style="color:#ae81ff">2</span>,
                   v2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;</span> v3 <span style="color:#f92672">%chin%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;A&#34;</span>, <span style="color:#e6db74">&#34;B&#34;</span>), <span style="color:#ae81ff">3</span>,
                   default <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)]
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  &gt; dt
     v1 v2 v3 v4
  1:  a  1  A  2
  2:  b  2  B  0
  3:  c  1  C  0
  4:  d  2  A  0
  5:  e  1  B  3
  6:  f  2  C  0
</code></pre></div><p>You could also use <em>assignment by reference</em> using <code>:=</code> to get similar results but <code>fcase</code> is the fast
implementation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  dt[v1 <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;a&#34;</span> <span style="color:#f92672">&amp;</span> v3 <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;A&#34;</span>, v4 <span style="color:#f92672">:=</span> <span style="color:#ae81ff">2</span>]
</code></pre></div><!-- raw HTML omitted -->
<ul>
<li>
<p>case_when</p>
<p><em>dplyr</em> approach to implement similar results</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  dplyr<span style="color:#f92672">::</span><span style="color:#a6e22e">case_when</span>(x <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">~</span> <span style="color:#ae81ff">1</span>,
                   x <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">~</span> <span style="color:#ae81ff">2</span>)
</code></pre></div></li>
</ul>
</li>
</ul>
<h4 id="ellipsis-dot-dot-dot">Ellipsis &hellip;</h4>
<p>Just to remind me how I could use ellipsis or the three dots <code>...</code> in my coding. There are two
scenarios I find it useful:</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Function wrapper</p>
<p>When creating a function wrapper and instead of providing all the arguments to be send further, you
could just use <code>...</code> ellipsis. For example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  get_mean <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(x, print <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>){

    x1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">mean</span>(x)
    <span style="color:#a6e22e">if </span>(print){
      <span style="color:#a6e22e">print</span>(x1)
    }else{
      <span style="color:#a6e22e">print</span>(<span style="color:#e6db74">&#34;Nothing&#34;</span>)
    }
  }

  <span style="color:#a6e22e">get_mean</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>)

  show_mean <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(<span style="color:#66d9ef">...</span>){
    <span style="color:#a6e22e">get_mean</span>(<span style="color:#66d9ef">...</span>)
  }

  <span style="color:#a6e22e">show_mean</span>(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>, print <span style="color:#f92672">=</span> F)

  <span style="color:#a6e22e">do.call</span>(show_mean, <span style="color:#a6e22e">list</span>(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>))
  <span style="color:#a6e22e">do.call</span>(show_it, <span style="color:#a6e22e">list</span>(x <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">20</span>, print <span style="color:#f92672">=</span> <span style="color:#66d9ef">FALSE</span>))
</code></pre></div><p>In <code>show_mean</code> the arguments given will be sent further to <code>get_mean</code> without the need to define explicitly in <code>show_mean</code> function.</p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Get values</p>
<p>When you want to provide certain values to a specific use or send to global value.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  go_global <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">function</span>(<span style="color:#66d9ef">...</span>) {
    args <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">list</span>(<span style="color:#66d9ef">...</span>)
    <span style="color:#a6e22e">paste</span>(args)

    <span style="color:#a6e22e">for</span>(i in <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#a6e22e">length</span>(args)) {
      <span style="color:#a6e22e">assign</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">names</span>(args)[i], value <span style="color:#f92672">=</span> args[[i]], envir <span style="color:#f92672">=</span> .GlobalEnv)
    }

  }

  <span style="color:#a6e22e">go_global</span>(<span style="color:#e6db74">&#34;Hello&#34;</span>, <span style="color:#e6db74">&#34;World&#34;</span>)

</code></pre></div><p>This is of course not advisable sending value to global environment but here is just to show how you
could manipulate the value as you wish. The values in ellipsis should be captured as a <code>list</code>.</p>
<p>You could also capture the names of the list by <code>names(list(...))</code>.</p>
</li>
</ul>
<h4 id="data-dot-table-tips">data.table tips</h4>
<p>Some tips for <code>data.table</code> that I came across while googling which might be useful.</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Print</p>
<p>To print more rows that default can be done with either:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  options(datatable.print.topn = 70)
  print(DT, topn = 70)
</code></pre></div><p>Using <code>options</code> will implement the changes globally. Else to make print nicer is using:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  options(datatable.prettyprint.char = 80L)
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>NA</p>
<p>Use <code>nafill()</code> to replace <code>NA</code> with specified value such as <code>nafill(dt, fill==99)</code> will replace all <code>NA</code> in
<strong>dt</strong> with <code>99</code>. To replace with front or back value of the vector then specify <code>fill=&quot;locf|nocb&quot;</code>
accordingly, ie. <code>locf</code> (last observation carried forward) and <code>nocb</code> (next observation carried
backward).</p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Joining with roll and foverlaps</p>
<p>For detail example you can read <a href="https://kykimeng.com/slides/rnorth%5Fdata%5Ftable.html#37">here</a>. Basically when specifying <code>DT[dt, on=.(key_col), roll=TRUE]</code> or
<code>roll=Inf</code> the data will be joined closest to the keyed value where <code>dt &gt;= DT</code>. Specifying with
<code>roll=-Inf</code> will be the opposite. With <code>roll=&quot;nearest&quot;</code> will roll both ways to the nearest value. Else
you can specify an absolute value to roll on ie. <code>roll=2</code> will roll to <code>dt</code> with <code>key_col + 2</code>.</p>
<p>Using <code>foverlaps(DT, dt, type = &quot;any&quot;)</code> will join <strong>DT</strong> and <strong>dt</strong> as long as the value ranges give a match
to the key values. When using <code>foverlaps()</code> you need to specify two keys eg. <code>key = c(&quot;col1&quot;, &quot;col2&quot;)</code>.
As in the given example with both columns are the key columns:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  foverlaps(dt4, dt3, type = &#34;any&#34;)

  ##    min_y max_y x dt4_y dt4_y_end
  ## 1:     0    10 c   5.7        10
  ## 2:    10    15 c   5.7        10
  ## 3:    10    15 a  11.9        13
  ## 4:    15    20 d  18.0        22
  ## 5:    20    30 d  18.0        22
  ## 6:    20    30 b  21.4        25
</code></pre></div><p>Else specifying <code>type=&quot;within&quot;</code> will join only those that match within the range.</p>
</li>
</ul>
<h4 id="ci-cd-and-code-coverage">CI/CD and Code Coverage</h4>
<p><em>First published date: 2021-06-04</em></p>
<p>A simple guide to use CI/CD and Code coverage.</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>CI/CD</p>
<p>This is a simple process to implement CI/CD using GitHub Actions with <a href="https://usethis.r-lib.org/index.html">usethis</a>
package. Basically the steps here is a summary from <a href="https://deanattali.com/blog/migrating-travis-to-github/">Dean Attali</a> with slight
changes:</p>
<ol>
<li>If you already use <code>Travis</code> and want to change to Github Actions, you have to
delete all Travis related files and references. Easier to search with project
<code>SPC s p</code> if you use Doom Emacs. Among those will be:
<ul>
<li>.travis.yml</li>
<li>link in README.md file</li>
<li>in .Rbuildignore file</li>
</ul>
</li>
<li><code>usethis</code> has problem with ssh so you have to change the <code>origin</code> to your Git
repo url either using terminal or <code>usethis::use_git_remote()</code> functions. You
can check your remote origin with <code>git remote -v</code> in the terminal just to
check where the repos origin is.</li>
</ol>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text"># with R usethis package
usethis::use_git_remote(&#34;origin&#34;, url = &#34;https://github.com/username/reponame.git&#34;, overwrite = TRUE)

# from terminal
git remote add origin https://github.com/username/reponame
</code></pre></div><ol>
<li>Get the CI url with:</li>
</ol>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">usethis::use_github_action_check_standard()
</code></pre></div><ol>
<li>Paste the URL to your README file. The URL is allready copy to your clipboard when running step 3.</li>
<li>You can edit <code>R-CMD-check.yml</code> file in folder <code>.github/workflow</code> to suit your need.</li>
</ol>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Covr</p>
<p>For Code coverage we will use both <code>covr</code> and <code>usethis</code> packages. You can also
read general guide from this <a href="https://www.r-bloggers.com/2017/06/how-to-add-code-coverage-codecov-to-your-r-package/">blog</a>. This short guide below is especially relevant if you are using
<strong>Github Action</strong>:</p>
<ul>
<li>
<p>When your package are loaded with <code>devtools::load_all()</code>, then run
<code>usethis::use_coverage()</code> to add the batch to your <code>README.Rmd</code> file.</p>
</li>
<li>
<p>Run <code>usethis::use_github_action(&quot;test-coverage&quot;)</code> to add file
<code>test-coverage.yaml</code> in folder <code>./github/workflow</code>.</p>
</li>
<li>
<p>If you use a private repos, you need to add your token to <a href="https://app.codecov.io/gh/">codecov.io</a> by
running this code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">covr::codecov(token = &#34;${{secret.CODECOV_TOKEN}}&#34;)
</code></pre></div></li>
<li>
<p>To check, run <code>covr::report()</code>. If you get error then you should run in
a new session without loading your package. Basically this error happens only
to Windows OS as <a href="https://github.com/r-lib/covr/issues/443">discussed here</a> by Jim Hester.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text"># Run R in your package folder without running devtools::load_all()
pkg &lt;- covr::package_coverage(path = getwd())
covr::report(pkg)
</code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="coding">Coding</h3>
<h4 id="tetapkan-path">Tetapkan <code>PATH</code></h4>
<p>Bila ingin memakai program di Ubuntu atau Windows melalui terminal, perlu
daftarkan program tersebut di <strong>PATH</strong>. Disini saya terangkan caranya di Ubuntu dan Windows.</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Ubuntu</p>
<p>Bila pasang program di Ubuntu melalui <strong>source</strong> boleh tetapkan dimana program disimpan
melalui penetapkan <code>--prefix</code> bila melarikan <code>./configure</code>. Cara biasa bila pasang
program dari source ialah:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  ./configure
  make
  make install
</code></pre></div><p>Bila <code>./configure</code> tidak menetapkan <code>prefix</code> secara tidak langsung komando yang
dipakai ialah <code>./configure --prefix=/usr/local</code> dimana folder <code>/usr/local</code> dipakai
untuk menyimpan fail-fail berkaitan program yang dipasang. Biasanya fail untuk
larikan program akan disimpan seterusnya di folder <code>bin</code>, libraries di folder <code>lib</code>,
manual di folder <code>man</code> dan seterusnya.</p>
<p>Untuk tetapkan folder semasa memasng program dari <strong>source</strong> boleh buat begini:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  ./configure --prefix=$HOME/local
  # atau
  ./configure --prefix=/home/ybk
</code></pre></div><p>Bila menetapkan <code>prefix</code> selain dari <code>/usr/local</code> seperti di atas, perlu tetapkan
folder tersebut di <code>$PATH</code> agar Ubuntu dapat melarikan program yang ingin dipakai. Untuk
periksa folder-folder yang sudah ditetapkan boleh pakai:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  &gt; echo $PATH
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  /home/ybk/.local/bin:/home/ybk/bin:/home/ybk/.local/bin:/usr/local/games:/snap/bin:/usr/local/stata
</code></pre></div><p>Penetapan folder di <code>$PATH</code> boleh dibuat dengan cara di bawah. Cara ini akan
memasukkan PATH di fail <code>/.profile</code> atau <code>/.bashrc</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  &gt; export PATH=&#34;$PATH:/path/folder&#34;
</code></pre></div><p>Bila melarikan komando <code>export</code> penetapan di <code>$PATH</code> hanya sementara dan hilang bila
mematikan komputer. Untuk memasukan folder yang ditetapkan di <code>--prefix</code> ke <code>$PATH</code>
selama-lamanya, harus larikan:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  source ~/.profile
  <span style="color:#75715e"># atau</span>
  source ~/.bashrc
</code></pre></div><p>Sekiranya tidak menetapkan di <code>$PATH</code> boleh juga menggunakan <code>symlink</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  sudo ln -s /path/ke/folder/baru/ ~/bin
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Windows</p>
<p>Cara daftarkan <code>PATH</code> untuk <code>.exe</code> program bergantung samada kita memiliki
<em>administrator right</em> atau tidak. Cara yang ditunjukkan disini ialah disituasi
tanpa <em>admin right</em>.</p>
<p>Kita boleh lihat semua program-program yang didaftarkan di <code>PATH</code> dengan melarikan
arahan di bawah di <em>power shell</em> atau <em>terminal</em>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  echo %PATH%
</code></pre></div><p>Sekiranya tidak pasti bagimana untuk membuka terminal, tulis di <em>search</em> samada
<code>cmd</code> atau <code>powershell</code>.</p>
<p>Kemudian buka <code>control panel</code> [kontrolpanel] &gt; <code>user</code> [brukerkontoer] &gt; <code>environment variable</code> [miljøvariablene]</p>
<p>Window baru akan dibuka dan pilih <em>Variable</em> &gt; <em>Path</em> &gt; <em>edit</em> &gt; <em>new</em>.</p>
<p>Masukkan path program yang menggandungi <code>.exe</code>. Penting tidak memasukkan nama fail
<code>.exe</code>, cuma path ke fail tersebut sahaja. Contohnya:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  C:\Program Files\R\R-4.0.0\bin
</code></pre></div></li>
</ul>
<h4 id="docker-basic">Docker basic</h4>
<p>Important commands:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker pull image-name
  docker run local-name image-name
  docker ps

  docker build
</code></pre></div><!-- raw HTML omitted -->
<ul>
<li>
<p>Use image</p>
<p>Some basic commands to start using <a href="https://docker-curriculum.com/">Docker</a>. Two things are important ie. <strong>Docker Image</strong> and <strong>Docker
Container</strong>. To fetch RStudio image from <a href="https://hub.docker.com/">Docker Hub</a> run the command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker pull rocker/rstudio
</code></pre></div><p>When the image has been pulled to the local Docker engine, you could create and run Docker container
based on the pulled image with</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker run --rm rocker/rstudio
</code></pre></div><p>Here the option <code>--rm</code> is used to tell docker to delete the container when exiting. Running <code>docker run</code>
is actually a short command to <code>docker create</code> and <code>docker start</code> of Docker container. Other options
that often are used when using <code>docker run</code> command include:</p>
<ul>
<li><code>-d</code> to detach the terminal to keep container running.</li>
<li><code>-P</code> (capital P) to publish all exposed ports to random ports</li>
<li><code>-p</code> to expose specific port only</li>
<li><code>--name</code> to give a name we want for the container</li>
</ul>
<p>To expose port 8787 both for server inside the container and externally of image rocker/rstudio</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker run -p 8787:8787 --name rstudio rocker/rtudio
</code></pre></div><p>To access RStudio from the webbrowser run <a href="http://localhost:8787">http://localhost:8787</a></p>
<p>To check all pulled images in the local machine, run <code>docker images</code> command. It is wise to delete
containers and images that aren&rsquo;t used to reduce space. Deleting the images is done using <code>docker rmi image-name</code> command while deleting container if option <code>--rm</code> when running the container is <code>docker rm container-name</code>.</p>
<p>To list all containers, use either of these commands.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker container ls -a
  docker ps -a
</code></pre></div><p>The options <code>-a</code> will also list the containers with <code>existed</code> status. To delete all containers that are
already existed, use the command <code>docker container prune</code>. Else, ordinary bash method defining all the
options as shown in the second command line below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker rm <span style="color:#66d9ef">$(</span>docker ps -a -q -f status<span style="color:#f92672">=</span>existed<span style="color:#66d9ef">)</span>
</code></pre></div><p>Without defining the specific options will only remove a certain container ie. <code>docker rm rstudio</code>.
The option <code>-q</code> for just returning the numeric ID and <code>-f</code> for filtering output based on conditions
provided.</p>
<p>Use <code>docker stop</code> to end container and <code>docker restart</code> to restart it.</p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Create Image</p>
<p>When no available image suits your need, than you can create one using <a href="https://docs.docker.com/engine/reference/builder/">Dockerfile</a> which is a text
file consists of commands that Docker client will call while creating an image. Example of Dockerfile copied from <a href="https://docker-curriculum.com/#docker-images">tutorial.</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  FROM python:3

  <span style="color:#75715e"># set a directory for the app</span>
  WORKDIR /usr/src/app

  <span style="color:#75715e"># copy all the files to the container</span>
  COPY . .

  <span style="color:#75715e"># install dependencies</span>
  RUN pip install --no-cache-dir -r requirements.txt

  <span style="color:#75715e"># define the port number the container should expose</span>
  EXPOSE <span style="color:#ae81ff">5000</span>

  <span style="color:#75715e"># run the command</span>
  CMD <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;python&#34;</span>, <span style="color:#e6db74">&#34;./app.py&#34;</span><span style="color:#f92672">]</span>
</code></pre></div><p>Then run <code>docker build</code> command from terminal as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker build -t yourusername/catnip .
</code></pre></div><p>The option <code>-t</code> takes an optional tag name and a location of the directory containing the Dockerfile.
<code>Yourusername</code> is the username from your <a href="https://hub.docker.com/">Docker Hub</a> account. When you will run the completed image,
then run:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker run -p 8888:5000 yourusername/catnip
</code></pre></div><p>The command we just ran used port 5000 for the server inside the container and exposed this
externally on port 8888. Head over to the URL with port 8888 with <a href="https://localhost:8888/">https://localhost:8888/</a></p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Mount directory</p>
<p>If you want to make local directory available in your container, the basic structure is as follow:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker run -it --name &lt;WHATEVER&gt; -p &lt;LOCAL_PORT&gt;:&lt;CONTAINER_PORT&gt; -v &lt;LOCAL_PATH&gt;:&lt;CONTAINER_PATH&gt; -d &lt;IMAGE&gt;:&lt;TAG&gt;
</code></pre></div><p>To implement then run:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker run -v myfolder:/data/myfolder image-name
  docker run --rm -it -v /mnt/F:/F silex/emacs
</code></pre></div><p>For multiple directory can be done with</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  docker run -it --rm <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>         -v <span style="color:#e6db74">&#39;/mnt/F:/F&#39;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>         -v <span style="color:#e6db74">&#39;/mnt/F:/N&#39;</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>         silex/emacs
</code></pre></div><p>This has reference from <a href="https://stackoverflow.com/questions/18861834/mounting-multiple-volumes-on-a-docker-container/18861869">StackOverflow</a>.</p>
</li>
</ul>
<h4 id="mount-drive">Mount drive</h4>
<p><em>First published date: 2021-02-22</em></p>
<p>This is only relevant to my personal reference at work.</p>
<p>The address for drive F and N is as follow:</p>
<ul>
<li>F: = \\fhi.no\felles</li>
<li>N: = \\fhi.no\fil\styrt</li>
<li>H: = \\fhi.no\home\Brukere_Y$\YOUR-USERNAME</li>
</ul>
<p>To check the path where the folders are mounted, in Windows run command <code>net use</code> in terminal with <code>cmd</code>
or PowerShell.</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Install</p>
<p>Install CIFS utilities package.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  sudo apt update
  sudo apt install cifs-utils autofs
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Mount</p>
<p>Basically you can mount the drive every time you want to access it directly with the command below
but this has to be done every time you login to you machine.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  sudo mount -t cifs -o username=YourWindowsUserName,password=YourWindowsPassword //fhi.no/Felles /mnt/F
</code></pre></div><p>You can run <code>df -h</code> to verify that mounting windows share folder in Linux was successful.</p>
<p>Alternatively you can automount the drive. Here I use <a href="https://help.ubuntu.com/community/Autofs#The%5FMaster%5FMap%5FFile">autofs</a> to automount instead of <code>fstad</code>. To do
the <code>fstad</code> way you can read <a href="https://linoxide.com/mount-windows-share-on-ubuntu-linux/">here</a>. If you wonder why then you can read <a href="https://www.linux.com/topic/desktop/how-configure-autofs-automount-linux/">here.</a> To start create file
<code>auto.cifs</code> in directory <code>/etc/</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  F -fstype=cifs,rw,credential=/etc/cifs-credentials,uid=1000,iocharset=utf8 ://fhi.no/Felles
  N -fstype=cifs,rw,credential=/etc/cifs-credentials,uid=1000,iocharset=utf8 ://fhi.no/styrt
  H -fstype=cifs,rw,credential=/etc/cifs-credentials,uid=1000,iocharset=utf8 ://fhi.no/home/Brukere_Y\$/MYUSERNAME
</code></pre></div><p><strong>NB!</strong> Look at dealing with special symbol such as folder name ie. <code>Brukere_Y$</code> which should be written
as <code>Brukere_Y\$</code>. If these settings don&rsquo;t work for you, try the settings below</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  N -fstype=cifs,rw,username=&lt;your-username&gt;,password=&lt;your-password&gt;,vers=3.0,uid=1000,file_mode=0777,dir_mode=0777,users ://fhi.no/fil/styrt
  F -fstype=cifs,rw,username=&lt;your-username&gt;,password=&lt;your-password&gt;,vers=3.0,uid=1000,file_mode=0777,dir_mode=0777,users ://fhi.no/felles
</code></pre></div><p>To understand how mount settings is done can be referred from this <a href="https://access.redhat.com/documentation/en-us/red%5Fhat%5Fenterprise%5Flinux/7/html/storage%5Fadministration%5Fguide/nfs-autofs">website on AUTOFS</a>. Basically the structure is</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">mount-point map-name options
</code></pre></div><p>The primary configuration file for the automounter is <code>/etc/auto.master</code>, also referred to as the
master map which may be changed accordingly. Open <code>auto.master</code> file and mounting directory to <code>/mnt</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  /mnt /etc/auto.cifs
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Execute</p>
<p>To run <code>autofs</code> the execute these command in terminal:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  sudo systemctl enable autofs
  sudo systemctl start autofs
</code></pre></div><p>Other options includes <code>restart</code> or <code>stop</code>. To check if you have access to directory <strong>F</strong> and <strong>N</strong> run this in terminal:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  cd ~ <span style="color:#f92672">&amp;&amp;</span> cd /mnt/F <span style="color:#f92672">&amp;&amp;</span> ls
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Credential</p>
<p>To ensure that your username and password secure, use credential file for example <code>/etc/cifs-credentials</code> with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  username=user
  password=password
  domain=domain
</code></pre></div><p>Then make it unreadable to others with</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  sudo chown root: /etc/cifs-credentials
  sudo chmod <span style="color:#ae81ff">600</span> /etc/cifs-credentials
</code></pre></div><p>Then to use the credentials run:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  sudo mount -t cifs -o credentials<span style="color:#f92672">=</span>/etc/cifs-credentials,file_mode<span style="color:#f92672">=</span>0777,dir_mode<span style="color:#f92672">=</span><span style="color:#ae81ff">0777</span> ://fhi.no/fil/styrt
</code></pre></div><p>Read more <a href="https://linuxize.com/post/how-to-mount-cifs-windows-share-on-linux/">here</a></p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Access to folders</p>
<p>Since it&rsquo;s defined in the file <code>/etc/auto.master</code> that mounting will be in <code>/mnt</code> to access the folders is done with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  cd /mnt/N
  cd /mnt/F
</code></pre></div><p>** Git :@Git:</p>
</li>
</ul>
<h3 id="git-related">Git Related</h3>
<h4 id="git-clone">Git Clone</h4>
<p>This is just 100% a copy from <a href="https://gist.github.com/jagregory/710671">gist</a> so I can check it when needed.</p>
<p>So you&rsquo;ve cloned somebody&rsquo;s repo from github, but now you want to fork it and contribute back. Never fear!</p>
<p>Technically, when you fork &ldquo;origin&rdquo; should be your fork and &ldquo;upstream&rdquo; should be the project you forked; however, if you&rsquo;re willing to break this convention then it&rsquo;s easy.</p>
<p><strong>Off the top of my head</strong></p>
<ol>
<li>Fork their repo on Github</li>
<li>In your local, add a new remote to your fork; then fetch it, and push your changes up to it</li>
</ol>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git remote add my-fork git@github...my-fork.git
  git fetch my-fork
  git push my-fork
</code></pre></div><p>Otherwise, if you want to follow convention:</p>
<ol>
<li>Fork their repo on Github</li>
<li>In your local, rename your origin remote to upstream</li>
</ol>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git remote rename origin upstream
</code></pre></div><ol>
<li>Add a new origin</li>
</ol>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git remote add origin git@github...my-fork
</code></pre></div><ol>
<li>Fetch &amp; push</li>
</ol>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git fetch origin
  git push origin
</code></pre></div><h4 id="git-submodule">Git Submodule</h4>
<p>Rujukan di <a href="https://www.vogella.com/tutorials/GitSubmodules/article.html">sini</a> lebih teratur. Penerangan dibawah ialah berasaskan pengalaman sendiri tanpa
struktur.</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Repo baru</p>
<p>Bila buat repo baru dan ingin tetapkan submodule untuk tema <a href="https://themes.gohugo.io/harbor/">harbor</a> dan folder <em>public</em> ke
<a href="https://yusbk.github.io">yusbk.github.io</a>. Submodule dipakai untuk memasukkan fungsi yang terdapat di repos lain ke dalam
repos sendiri ie. subfolder di folder utama repos.</p>
<p>Contoh dibawah ialah untuk memasukkan folder <em>harbor</em> ke dalam folder <em>themes</em> di folder utama.
Subfolder <em>public</em> pula ialah submodule dari repo blog di <a href="https://github.com/yusbk/yusbk.github.io">Github</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  # themes
  git submodule add https://github.com/matsuyoshi30/harbor.git themes/harbor

  # yusbk.github.io master branch
  git submodule add -b master git@personal:yusbk/yusbk.github.io.git public

  # update
  git submodule init
  git submodule update --remote --merge
</code></pre></div><p>Untuk update submodule pakai komando di bawah. Penting commit submodule dahulu kemudian commit
parent repo sebelum push dari parent repos. Caranya:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  cd public
  git add .
  git commit -am &#39;Tambah pertukaran di public submodule&#39;
  cd ..
  git push origin master --recurse-submodules=on-demand
</code></pre></div><p>Bila tambah fail baru, jangan lupa daftarkan fail tersebut dengan <code>git add .</code> sebelum pakai <code>git commit</code>. Sekiranya HEAD detaching dengan submodule boleh guna script ini untuk kembali ke MASTER.
Rujukan di <a href="https://stackoverflow.com/questions/18770545/why-is-my-git-submodule-head-detached-from-master/49997119#49997119">StackOverflow</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  <span style="color:#75715e">#!/bin/bash</span>
  echo <span style="color:#e6db74">&#34;Building all submodules while checking out from MASTER branch.&#34;</span>

  git submodule update
  git submodule foreach git checkout master
  git submodule foreach git pull origin master
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Clone</p>
<p>Untuk clone repo termasuk semua submodules di repo boleh guna:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git clone --recursive <span style="color:#f92672">[</span>URL to repo<span style="color:#f92672">]</span>
</code></pre></div><p>Bila clone repos tanpa <code>--recursive</code> yang mempunyai submodules, folder-folder submodule akan hanya
kosong. Untuk dapatkan isi kandungan submodels tersebut harus larikan komando:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git submodule update --init
  <span style="color:#75715e">## sekiranya ada nested submodules</span>
  git submodule update --init --recursive
  git submodule update --rebase --merge
</code></pre></div><p>Sekiranya masih kosong, boleh letak <code>--recursive</code> disebabkan nested submodules <code>../themes/harbor</code>. Bila
sudah selesai pasang aturcara, bolehlah kemaskini submodule dengan <code>fetch/pull</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  <span style="color:#75715e"># pull all changes in the repo including changes in the submodules</span>
  git pull --recurse-submodules

  <span style="color:#75715e"># pull all changes for the submodules</span>
  git submodule update --remote
</code></pre></div><p>Sekiranya masih tidak berhasil, padamkan folder submodule <code>harbor</code> dan larikan semua komando:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git submodule set-url themes/harbor https://github.com/matsuyoshi30/harbor.git
  git submodule sync
  git submodule update --rebase --remote --merge --recursive
</code></pre></div><p>Sekiranya <code>HEAD detached</code>, boleh coba <code>checkout master</code> dan <code>pull</code> semula. Cara seperti diatas,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git submodule foreach git checkout master
  git submodule foreach git pull origin master
</code></pre></div><p>Atau buat <code>pull request</code> dengan cara:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  cd public
  git push origin HEAD:refs/heads/37f62cf
</code></pre></div><p>Nombor <code>37f62cf</code> ialah contoh rujukan HEAD semasa dari GitHub commit.</p>
<p>Coba tukar branch ke <code>master</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git checkout master
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Kekunci ssh</p>
<p>Sekiranya ingin pakai kekunci <code>ssh</code> boleh tukar di file <code>config</code> di:</p>
<ul>
<li>.git/config</li>
</ul>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  <span style="color:#f92672">[</span>submodule <span style="color:#e6db74">&#34;public&#34;</span><span style="color:#f92672">]</span>
            <span style="color:#75715e"># url = https://github.com/yusbk/yusbk.github.io.git</span>
            url <span style="color:#f92672">=</span> git@personal:yusbk/yusbk.github.io.git
</code></pre></div><ul>
<li>.git/module/public/config</li>
</ul>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  <span style="color:#f92672">[</span>remote <span style="color:#e6db74">&#34;origin&#34;</span><span style="color:#f92672">]</span>
          <span style="color:#75715e"># url = https://github.com/yusbk/yusbk.github.io.git</span>
          url <span style="color:#f92672">=</span> git@personal:yusbk/yusbk.github.io.git
          fetch <span style="color:#f92672">=</span> +refs/heads/*:refs/remotes/origin/*
</code></pre></div></li>
</ul>
<h4 id="git-multiple-account">Git Multiple account</h4>
<!-- raw HTML omitted -->
<ul>
<li>
<p>config file</p>
<p>Create a <code>config</code> file in your <code>~/.ssh</code> folder that will manage your accounts.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  Host personal
  HostName github.com
  User git
  IdentityFile ~/.ssh/id_rsa_personal

  Host work
  HostName github.com
  User git
  IdentityFile ~/.ssh/id_rsa_work
</code></pre></div><p>When cloning a new repo then you only have to specify hostname to your Git account. Example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git clone git@personal:yusbk/nama_rep.git
  git clone git@work:ybkamaleri/nama_rep.git
</code></pre></div><p>When your repo has <code>submodule</code> to be able to push changes to remote, I have to change this url</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  url = https://github.com/yusbk/yusbk.github.io.git
</code></pre></div><p>to a new url with reference to SSH-key</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  url = git@personal:yusbk/yusbk.github.io.git
</code></pre></div><p>in the <strong>config</strong> files in these folder:</p>
<ul>
<li><code>../cloned_repo/.git</code></li>
<li><code>../cloned_repo/.git/modules/module_repo</code></li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>gitconfig file</p>
<p>This is another setting when using multiple git accounts without needing to change hostname. After
cloning repo inside a folder eg. <code>~/Git.work/</code> then you can edit config file called <code>~/.gitconfig</code> in
HOME dir.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  [user]
      name = Your Name
      email = your@email.com

  [includeIf &#34;gitdir:~/Git-work/&#34;]
      path = .gitconfig-work
</code></pre></div><p>Then create a file named <code>.gitconfig-work</code> with</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  [user]
      name = Your Name
      email = your@email.com

  [core]
      sshCommand = ssh -i ~/.ssh/id_work
</code></pre></div><p>Here <code>-i</code> is identifying file. This setting makes all repositories under <code>~/Git-work</code> folder to use work
credentials automatically without needing to change hostname when cloning a repo.</p>
</li>
</ul>
<h4 id="git-upstream">Git Upstream</h4>
<p>When you forked a repo then your copy of forked-repo in your Github profile will be referred to as
<em>origin</em> while <em>upstream</em> refers to the real origin where the repo was forked from. If you cloned a repo
then you will only have local copy of the repo. You can read <a href="https://yusbk.github.io/2020/06/14/git-clone/">here</a> to convert it as a forked repo.</p>
<p>To sync your forked repo then you have to add the upstream url.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git remote add upstream https://github.com/repo-name.git
  git fetch upstream
  git checkout master
  git merge upstream/master
</code></pre></div><p>If you want to see the changes from upstream before merging to master, you can use one of these
alternatives. Specifying <code>git log -10</code> will show the last 10 commits.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git diff master upstream/master
  <span style="color:#75715e"># OR</span>
  git diff ..upstream/master
  git log --oneline --graph -10
  git log --since<span style="color:#f92672">=</span>2.day
  git show
</code></pre></div><p>If you have error for displaying the <code>diff</code> you might have to specify editor with <code>-git config --global core.editor emacs</code>. In this case I use <em>emacs</em> as my diff editor.</p>
<p>When everything is updated without conflict then you can push to your origin. Sometime you get error
when pushing to origin because your local copy have different HEAD from the origin. You could force
push with</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git push -f origin master
</code></pre></div><h4 id="git-worktree">Git Worktree</h4>
<p>Normally I created a new branch when I intent to do some changes to the master branch. But the
problem is I have to stash changes when switching back and forth. To avoid this create <em>worktree</em> for
the branches you want to work seperately. Basically it creates a new folder and work independently.</p>
<p>For instance, to start worktree with newfix from master branch. You can create newfix branch first
then worktree or directly to create worktree with newfix branch</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  git branch fix
  git worktree add ./path/newfix fix

  <span style="color:#75715e"># direct from origin/master</span>
  git worktree add -b fix ./path/newfix origin/master
</code></pre></div><p>This will create <em>fix</em> branch and <em>newfix</em> folder at <code>./path/newfix</code>. The example above uses <code>origin/master</code> which
is the default and can be ignored. If you select different branch then you can specify
<code>origin/fix</code>. To work with the new worktree newfix branch then you just need to change folder</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  cd ./path/newfix

  <span style="color:#75715e"># Check you are in fix branch</span>
  git status
</code></pre></div><p>To list down all the workrees you can use <code>git worktree list</code>. Deleting a worktree can be done by
deleting the folder directly and run <code>git worktree prune</code> to delete it from the list. If you have
error because your branch already checked out then delete <code>.git/worktrees/newfix</code>. See
<a href="https://www.saltycrane.com/blog/2017/05/git-worktree-notes/">https://www.saltycrane.com/blog/2017/05/git-worktree-notes/</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  rm -rf path/newfix
  git worktree prune
  git branch -d fix
</code></pre></div><h4 id="git-rebase">Git Rebase</h4>
<p>Rebase to previous commit or any previous commit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git log --oneline --graph -5
git reset --hard &lt;commit id&gt;
git push origin HEAD --force
</code></pre></div><p>The steps above:</p>
<ul>
<li>Look at the previous 5 lines with <code>-5</code> or any number you like. You will also
find the commit id there</li>
<li>Rebase to the selected commit id</li>
<li>Force it back to the origin ie. rewriting the history :(</li>
</ul>
<p>Other alternative is to use interactive rebase.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git rebase -i HEAD~5
</code></pre></div><p>You will be presented with somethig like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">drop 3fg501 ...
pick ab401s ...
pick fas6ta ...
pick 60gfab ...
pick 4abs40 ...
</code></pre></div><p>When you change to <code>drop</code> then the commit will be deleted.</p>
<h3 id="emacs">Emacs</h3>
<h4 id="doom-tips">Doom tips</h4>
<p><em>First published date: 2021-04-27</em></p>
<p>Some tips to learn the keybindings in Doom and Evil in the process of migrating
from my vanilla Emacs settings. For overview of keybindings type
<code>SPC-h-b-b</code>. Other good references:</p>
<ul>
<li><a href="https://narra.co.za/doom-tips-and-howtos/">Narra&rsquo;s Blog - Doom Tips and Howtos</a></li>
<li><a href="https://cheatography.com/alexandresalome/cheat-sheets/emacs-doom-org-mode/">Org Mode Shortcuts for Emacs Doom</a></li>
<li><a href="https://gist.github.com/hjertnes/9e14416e8962ff5f03c6b9871945b165">Gist of Hjertnes</a></li>
<li><a href="https://github.com/emacs-evil/evil-collection">Evil-mode collection</a></li>
</ul>
<p>Doom leader-key is <code>SPC</code> and localleader-key is <code>SPC-m</code>. When in <em>Insert</em> mode
use <code>M-SPC</code> or <code>M-SPC-m</code> to call the menu available as in the <em>Normal</em> mode.
Else change mode with <code>ESC</code> or <code>jk</code> binding. To toggle between Emacs state and
Evil use <code>C-z</code>.</p>
<p>To show all your keybindings <code>SPC-h b b</code></p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Most used keys</p>
<p>There are keys I mostly need to remember and there are also listen in their
respective groups below:</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Normal mode</p>
<ul>
<li><code>zx</code> kill buffer</li>
<li><code>SPC-w w</code> move to buffer</li>
<li><code>zz</code> center line</li>
<li><code>SPC-i r</code> insert from evil-register or <code>0p</code> when you know it&rsquo;s register number
<code>0</code> in evil register or 1,2,&hellip;</li>
<li><code>viw</code> select word under cursor or <em>inner</em> word under the cursor</li>
<li><code>vio</code> select all inner and inclding a symbol</li>
<li><code>va(</code> selecte all around the bracket <code>(</code> or any specific symbol that you can specify eg. <code>va&quot;</code></li>
<li><code>di(</code> and <code>yi(</code> is both delete and yank inner words respectively.</li>
<li><code>ciw</code> clear the inner word under the cursor and move to inner mode.</li>
<li><code>SPC-s s</code> search word or <code>fw</code> and <code>Fw</code>.</li>
<li><code>SPC-TAB .</code> change workspace.</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Insert mode</p>
<ul>
<li><code>C-w</code> kill word bakword</li>
<li><code>M-d</code> kill word forward</li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Navigation</p>
<p>When in the <!-- raw HTML omitted -->Normal<!-- raw HTML omitted --> mode:</p>
<ul>
<li><code>C-b</code> and <code>C-f</code> for page backward and page forward (whole page)</li>
<li><code>C-u</code> and <code>C-d</code> for half page up and down</li>
<li><code>z-z</code> move line to center of screen</li>
<li><code>gsj</code> and <code>gsk</code> go to line downward (j) or upward (k) ie. avy-goto</li>
<li><code>gsf</code> and <code>gsF</code> go to forward (f) or backward(F) for selected letter</li>
<li><code>fw</code> and <code>Fw</code> find <code>w</code> or any word/symbols specified forward or backward in a
line. Move to next foward or backward with <code>f</code></li>
<li><code>g;</code> go to last changed</li>
<li><code>''</code> and <code> </code> `` jump to mark-line and goto-mark but works as jump cursor to previous position too</li>
<li><code>C-i</code> and <code>C-o</code> jump to previous cursor forward or backward</li>
<li><code>ma</code> to mark position as <strong>a</strong> and use <code>'a</code> to go to the line where the mark is
or <code>`a</code> (backtick) to go to the position of the marked ie. <code>a</code></li>
<li><code>Shift-L</code> and <code>Shift-H</code> moves cursor to lower (L) or higher (H) screen</li>
<li><code>Shift-M</code> moves cursor to the middle of the screen</li>
<li>Split windows with Evil shorcut <code>:sp</code> or <em>evil-window-split</em> <code>C-w s</code> or
<em>evil-window-vsplit</em> <code>C-w v</code>.</li>
<li><code>SPC-s d</code> search current directory or <code>Spc-s p</code> current project</li>
<li><code>SPC-'</code> resume last search</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Editing</p>
<p>In <!-- raw HTML omitted -->Normal<!-- raw HTML omitted --> mode:</p>
<ul>
<li><code>db</code> delete backward till next whitespace</li>
<li><code>d$</code> delete to end of line from cursor</li>
<li><code>d0</code> delete to start of line from cursor</li>
<li><code>ds(</code> delete columns or any parantheses specify after <code>s</code> ie. symbols</li>
<li><code>cw</code> kill from cursor position to next whitespace</li>
<li><code>4cw</code> kill 4 words (or any number) forward</li>
<li><code>ci{</code> kill all within the curly bracket when the cursor is inside. Other
symbols can also be specified and when cursor is inside the specified symbols
all text inside will be deleted.</li>
<li><code>[o</code> and <code>]o</code> will insert newline above or below respectively</li>
<li><code>C-j</code> will cut/split the sentence</li>
<li><code>gU</code> for UPPERCASE or <code>gu</code> lowercase or <code>g~</code> to toggle between</li>
<li><code>:e</code> edit file</li>
<li><code>:w</code> save file</li>
<li><code>viw</code> select a word under the cursor</li>
<li><code>*</code> select all word under the cursor in the buffer</li>
<li><code>#</code> select all word in the same line</li>
<li><code>/</code> search word</li>
<li><code>vio</code> select all inner and inclding a symbol</li>
<li><code>va(</code> selecte all around the bracket <code>(</code> or any specific symbol that you can specify eg. <code>va&quot;</code></li>
<li><code>di(</code> and <code>yi(</code> is both delete and yank inner words respectively.</li>
<li><code>ciw</code> clear the inner word under the cursor and move to inner mode.</li>
<li><code>Spc-s s</code> search word or <code>fw</code> and <code>Fw</code></li>
</ul>
<p>In <!-- raw HTML omitted -->Insert<!-- raw HTML omitted --> mode:</p>
<ul>
<li><code>C-w</code> delete word backward</li>
</ul>
<p>In <!-- raw HTML omitted -->Visual<!-- raw HTML omitted --> mode:</p>
<ul>
<li>Block all line and press <code>=</code> to do indentation</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Multiedit</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>In a file one at a time</p>
<p>Doom uses <a href="https://github.com/hlissner/evil-multiedit">multiedit</a> package otherwise it&rsquo;s like <a href="https://github.com/magnars/multiple-cursors.el">multiple-cursors</a> package plus <a href="https://github.com/victorhge/iedit">iedit</a>
package. Basic keybinding is <code>M-d</code> or <code>M-D</code>. It works both in Normal and
Visual mode.</p>
<p>In <strong>Normal</strong> mode, when the course under a word, pressing <code>M-d</code> will select the
word, repeating <code>M-d</code> mark forward and <code>M-D</code> mark backward. Use <code>C-n</code> and <code>C-p</code>
for next and previous selected word. In <strong>Visual</strong> mode, when you have made
selection pressing <code>R</code> will select all the marked section in the whole document.</p>
<p>Press <code>Enter</code> to deselect or reselect the marked section.</p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>All in a file</p>
<p>Select the text then <code>R</code></p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Search and replace in a project</p>
<ul>
<li>Search the text with <code>SPC-s p</code>.</li>
<li>When all the files are listed, enter swiper edit with <code>C-c C-e</code>.</li>
<li>Select the word then multiedit all word with <code>R</code> key, then edit.</li>
<li>Save the file with <code>C-c C-c</code> or cancel with <code>C-c C-k</code>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Org related</p>
<ul>
<li><code>SPC-m-h</code> to change to heading</li>
<li><code>SPC-m-i</code> to change to item</li>
<li><code>Shift-TAB</code> to move backward in table</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Good to know</p>
<ul>
<li><code>SPC-h-v</code> or <code>C-h v</code> to check the value or default value of any function.</li>
<li><code>SPC-TAB-TAB</code> change workspace</li>
</ul>
</li>
</ul>
<h4 id="smerge-ediff-and-diff"><!-- raw HTML omitted -->DONE<!-- raw HTML omitted --> Smerge, ediff and diff</h4>
<p>For enditing conflict in git, use smerge or ediff.</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Smerge</p>
<p>Basic workflow:</p>
<ul>
<li>Open magit status with <code>SPC g g</code> in Doom</li>
<li>Identify the mark with <code>Unmerged</code> under <code>Unstage</code> list</li>
<li>Go to the file and press <code>Enter</code> to open the file</li>
<li>The base command for <em>Smerge</em> is <code>C-c ^</code></li>
<li>You will see the conflict and selecting the upper with <code>C-c ^ u</code> and lower with <code>C-c ^ l</code></li>
<li>To select all &lsquo;conflicting&rsquo; changes press <code>C-c ^ a</code></li>
<li>To navigate the conflicts use <code>C-c ^ n</code> and <code>C-c ^ p</code> for next and previous conflict</li>
<li>To see all the keybindings use <code>C-c ^ h</code></li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Ediff</p>
<p>When you are in the file with conflict, type <code>M-x smerge-ediff</code> or <code>M-x vc-resolve-conflicts</code>. You will get 3 windows showing your HEAD and origin/HEAD
that you have fetched and the outcome or end product. You can select A or B to
select which you can to keep or delete. Use <code>?</code> to see all the shortcuts to use.</p>
<p>This YouTube video explains it in more detail: <a href="https://www.youtube.com/watch?v=9S2pMZ6U5Tc">Smerge and Ediff</a></p>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Diff</p>
<p>To use diff directly from git comparing local and origin can be done with:</p>
<ul>
<li>Fetch changes from remotes <code>git fetch origin</code></li>
<li>Check log <code>git log master..origin/master</code></li>
<li>Show the changes <code>git diff master..origin/master</code></li>
<li>Merge changes <code>git merge origin/master</code></li>
</ul>
<p>Else you could use <code>git pull</code> if you aren&rsquo;t interested to check the changes
before merging.</p>
</li>
</ul>
<h4 id="ssh-key-with-git-on-windows"><!-- raw HTML omitted -->DONE<!-- raw HTML omitted --> SSH-key with Git on Windows</h4>
<p><em>First published: 2020-09-29</em></p>
<p>Generally, these are what I did:</p>
<ul>
<li>Install git-with-openssh</li>
<li>Create SSH-key</li>
<li>Add SSH-key to ssh-agent</li>
<li>Create <a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/working-with-ssh-key-passphrases#auto-launching-ssh-agent-on-git-for-windows">~/.bashrc</a> for auto-launching ssh-agent</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>openSSH</p>
<p>Windows 10 include <strong>openSSH</strong>. But I can&rsquo;t make it work with git so I use <strong>git-with-openssh</strong> installed
via <a href="https://scoop-docs.now.sh/docs/overview/So-What.html#why-should-you-care-about-scoop">scoop</a>. This will install Git and openSSH together. After installation, it&rsquo;s important to check
where is your <code>~/.ssh</code> root folder via <code>Git bash.</code> This is the folder where you will save your SSH-key.</p>
<p>Since I use Emacs, I add this code to use git-bash in shell. This is taken from <a href="https://emacs.stackexchange.com/questions/22049/git-bash-in-emacs-on-windows">StackExchange</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-emacs-lisp" data-lang="emacs-lisp">  (if (<span style="color:#a6e22e">equal</span> system-type <span style="color:#e6db74">&#39;windows-nt</span>)
      (progn (setq explicit-shell-file-name
                   <span style="color:#e6db74">&#34;C:/Users/ybka/scoop/apps/git-with-openssh/current/bin/bash.exe&#34;</span>)
             (setq shell-file-name explicit-shell-file-name)
             (setq explicit-bash.exe-args <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;--login&#34;</span> <span style="color:#e6db74">&#34;-i&#34;</span>))
             (add-to-list <span style="color:#e6db74">&#39;exec-path</span> <span style="color:#e6db74">&#34;C:/Users/ybka/scoop/apps/git-with-openssh/current/bin&#34;</span>)
             (setenv <span style="color:#e6db74">&#34;SHELL&#34;</span> shell-file-name)
             (add-hook <span style="color:#e6db74">&#39;comint-output-filter-functions</span> <span style="color:#e6db74">&#39;comint-strip-ctrl-m</span>)))

  (defun git-bash () (interactive)
         (let ((explicit-shell-file-name <span style="color:#e6db74">&#34;C:/Users/ybka/scoop/apps/git-with-openssh/current/bin/bash.exe&#34;</span> ))
           (<span style="color:#a6e22e">call-interactively</span> <span style="color:#e6db74">&#39;shell</span>)))
</code></pre></div><p>Then as suggested from StackExchange, I created <code>~/.bash_profile</code> (root for Git-bash) and add the
codes below to display shell prompt properly in Emacs.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">  if [ -n &#34;$INSIDE_EMACS&#34; ]; then
  export PS1=&#39;\[\033[32m\]\u@\h \[\033[33m\]\w\[\033[36m\]`__git_ps1`\[\033[0m\]\n$ &#39;
  fi
</code></pre></div><p>To be on the safe side, I also add <strong>git-with-openssh</strong> the PATH in Windows Environment. You can find guides for doing it
in many places eg. <a href="https://www.architectryan.com/2018/03/17/add-to-the-path-on-windows-10/">here</a>. In my pc, the path is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">   C:/Users/ybka/scoop/apps/git-with-openssh/current/bin/
</code></pre></div></li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Create SSH key</p>
<p>If you haven&rsquo;t created an SSH-key then do so by running the code below in your Git bash. Else you
can read more <a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh">here</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  ssh-keygen -t rsa -b <span style="color:#ae81ff">4096</span> -C <span style="color:#e6db74">&#34;your_email@example.com&#34;</span>
</code></pre></div><p>Paramters specification:</p>
<ul>
<li><code>-t</code> is to specify RSA as the type of key to generate</li>
<li><code>-b</code> for 4096-bit keys</li>
<li><code>-C</code> for comment</li>
</ul>
<p>Then add your newly created SSH-key to <code>ssh-agent</code> to manage your key. If your <code>ssh-agent</code> haven&rsquo;t been
started then you can do so silently and has it running in the background. You will get an output
something like <code>&gt; Agent pid 4353</code>. Run this command to start ssh-agent for Windows in PowerShell:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-emacs-lisp" data-lang="emacs-lisp">start-ssh-agent.cmd
</code></pre></div><p>or run silently with <code>eval $(ssh-agent -s)</code>. Then adding your ssh-key with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  ssh-add ~/.ssh/id_rsa_personal
</code></pre></div><p>For Windows user, you can auto-launching the <code>ssh-agent</code> by following the guide
<a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/working-with-ssh-key-passphrases">here</a>. Basically adding file <code>~/.profile</code> or <code>~/.bashrc</code> in your git ssh root
which you find via Git bash. The content of <code>~/.bashrc</code> file is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">env=~/.ssh/agent.env

agent_load_env () { test -f &#34;$env&#34; &amp;&amp; . &#34;$env&#34; &gt;| /dev/null ; }

agent_start () {
(umask 077; ssh-agent &gt;| &#34;$env&#34;)
. &#34;$env&#34; &gt;| /dev/null ; }

agent_load_env

# agent_run_state: 0=agent running w/ key; 1=agent w/o key; 2= agent not running
agent_run_state=$(ssh-add -l &gt;| /dev/null 2&gt;&amp;1; echo $?)

if [ ! &#34;$SSH_AUTH_SOCK&#34; ] || [ $agent_run_state = 2 ]; then
agent_start
ssh-add
elif [ &#34;$SSH_AUTH_SOCK&#34; ] &amp;&amp; [ $agent_run_state = 1 ]; then
ssh-add
fi

unset env
</code></pre></div><p>Copy your public SSH-key either manually or by running <code>clip</code> which will copy it to clipboard then add
it to your GitHub account.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  clip &lt; ~/.ssh/id_rsa_personal
</code></pre></div><p>You can test the connection and verify your loaded SSH-key</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">  <span style="color:#75715e"># Check connection</span>
  ssh -T git@github.com

  <span style="color:#75715e"># Verify</span>
  ssh-add -l -E md5
</code></pre></div></li>
</ul>
<h4 id="ess-tips"><!-- raw HTML omitted -->TODO<!-- raw HTML omitted --> ESS tips</h4>
<p>Some tips to use <code>ESS</code>. This documents will keep on growing as I find more
shortcuts to help me work efficiently.</p>
<ul>
<li><code>C-c C-s</code> to switch R processes when running multiple processes</li>
<li><code>C-c C-z</code> to switch to inferior or scripts</li>
<li><code>C-C C-e C-r</code> reload R inferior via <code>inferior-ess-r-reload-hook</code></li>
<li><code>SPC-m v</code> for debugging eg. <code>b</code> for brakepoint or <code>K</code> kill all breakpoint</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>RMarkdown</p>
<p>I keep on forgetting these keys after moving to Doom. So for reference:</p>
<ul>
<li><code>M-n e</code> to evaluate RMarkdown with Poly and using standard Doom evaluate.</li>
</ul>
</li>
</ul>
<h3 id="recipe">Recipe</h3>
<h4 id="biskut-italy">Biskut Italy</h4>
<p>Care buat biskut simple. Biasa bah jumpa di Italy ini biskut dan namanya dorang panggek <em>biscotti</em>.</p>
<!-- raw HTML omitted -->
<ul>
<li>Bahan-bahannya
<table>
<thead>
<tr>
<th>Unit</th>
<th>Bahan</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 g</td>
<td>kacang-kacang campuran sukak hati. Boleh jugak campur kismis sikit kalo mau.</td>
</tr>
<tr>
<td>1 sm</td>
<td>kulit oren atau limau nipis. Mana-mana sak la yang ada. Limau nipis murah</td>
</tr>
<tr>
<td>100 g</td>
<td>margerin atau mentega sak. Kalau ikut betul margerin lah tapi tengok budget la.</td>
</tr>
<tr>
<td>100 g</td>
<td>gula kasar</td>
</tr>
<tr>
<td>2 st</td>
<td>gula vanilla</td>
</tr>
<tr>
<td>1 biji</td>
<td>telur</td>
</tr>
<tr>
<td>350 g</td>
<td>tepung gandum</td>
</tr>
<tr>
<td>1 st</td>
<td>baking powder</td>
</tr>
</tbody>
</table>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Cara-caranya</p>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Bahagian 1</p>
<ul>
<li>
<p>Potong-potong kasar semua kekacang. Parut kulit atasan limau/oren yang sudah dicuci.</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<figure>
    <img src="/images/biskut_kacang.jpg"
         alt="Figure 1: Kekacang potong kasar" width="250"/> <figcaption>
            <p>Figure 1: Kekacang potong kasar</p>
        </figcaption>
</figure>

</li>
<li>
<p>Gaul margerin, gula dan gula vanilla sehingga sebati. Letakkan telur dan gaul
lagi sampai sebati.</p>
</li>
<li>
<p>Masukkan kekacang dan kulit limau.</p>
</li>
<li>
<p>Masukkan tempung dan baking powder. Gaul sebati. Kalau campuran tu masih
telampau melekat ditangan boleh tambah sikit tepung.</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<figure>
    <img src="/images/biskut_gaul.jpg"
         alt="Figure 2: Gaul sampai sebati" width="250"/> <figcaption>
            <p>Figure 2: Gaul sampai sebati</p>
        </figcaption>
</figure>

</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Bahagian 2</p>
<ul>
<li>
<p>Bahagi 3 atau 4 gaulan tadi dan gulung kemudian tekan sedikit. Pangang selama 15
minit dengan kepanasan oven 200 C dan sejukkan sedikit. Turunkan suhu oven ke
50 C.</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<figure>
    <img src="/images/biskut_gulung.jpg"
         alt="Figure 3: Gulung panjang" width="250"/> <figcaption>
            <p>Figure 3: Gulung panjang</p>
        </figcaption>
</figure>

</li>
<li>
<p>Sementara biskut masih sedikit panas-panas, potong melintang. Besarnya ikut
kamu sak. Tebalikkan biskut dengan potongan di atas.</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<figure>
    <img src="/images/biskut_potong.jpg"
         alt="Figure 4: Potong sesuka hati besarnya" width="250"/> <figcaption>
            <p>Figure 4: Potong sesuka hati besarnya</p>
        </figcaption>
</figure>

</li>
<li>
<p>Masukkan kembali ke oven yang panasnya 50 C selama dalam 45 minit.</p>
</li>
<li>
<p>Sudah siap bolehlah sejukkan di talam jaring-jaring dan tapau yang boleh
tutup rapat supaya endak cepat abis.</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<figure>
    <img src="/images/biskut_sadap.jpg"
         alt="Figure 5: Siap untuk dihidang" width="250"/> <figcaption>
            <p>Figure 5: Siap untuk dihidang</p>
        </figcaption>
</figure>

<p>Selamat mencobak!</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>Tips</p>
<ul>
<li>Kalau rajin dan ndak mau potong panjang, boleh jugak buat bulat-bulat kecik
biskutnya dan tekan.</li>
<li>Boleh jugak masukkan coklat yang dipotong-potong kecik bersama kekacang.</li>
</ul>
</li>
</ul>




      

      
    </article>
    
    
      
  <div id="disqus_thread"></div>
  <script type="text/javascript">
        (function() {
            
            
            if (window.location.hostname == "localhost") return;

            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            var disqus_shortname = 'yusbk-github-io';
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
  <noscript
    >Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript"
      >comments powered by Disqus.</a
    ></noscript
  >
  <a href="https://disqus.com/" class="dsq-brlink"
    >comments powered by <span class="logo-disqus">Disqus</span></a
  >


    
  </div>

    <footer>
  

<div class="social-icons">
  
    
    
      
      <a href="https://twitter.com/GoHugoIO" name="twitter">
        <em class="fab fa-twitter"></em>
      </a>
    
  

  
</div>


  
  <div class="container">
    <p class="credits copyright">
      <a href="https://yusbk.github.io/about">Yusman Kamaleri</a>
      &nbsp;&copy;
      2022
      
        &nbsp;/&nbsp;
        <a href="https://yusbk.github.io/">𝔂𝓾𝓼𝓴𝓪𝓶</a>
      
      &nbsp;&ndash;&nbsp;
      <em class="fas fa-moon" id="dark-mode-toggle"></em>
    </p>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
  </div>
</footer>

  </body>
</html>
