<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<title>special symbol</title>


  




<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="alternate" type="application/rss+xml" href="https://yusbk.github.io/index.xml" title="ùîÇùìæùìºùì¥ùì™ùì∂">

<link id="dark-mode-theme" rel="stylesheet" href="https://yusbk.github.io/css/dark.css" />
<link rel="stylesheet" href="https://yusbk.github.io/fontawesome/css/all.min.css" />

<script src="https://yusbk.github.io/js/bundle.js"></script>
<script src="https://yusbk.github.io/js/instantpage.js" type="module" defer></script>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<meta name="generator" content="Hugo 0.88.0" />
  </head>
  <body>
    
  




  <header>
    <nav class="navbar">
  <div class="nav">
    
      <a href="https://yusbk.github.io/" class="nav-logo">
        <img
          src="https://yusbk.github.io/images/yk.png"
          width="40"
          height="40"
          alt="Logo"
        />
      </a>
    

    <ul class="nav-links">
      
        
          <li>
            <a href="/about/" id="About"
              ><em class="fas fa-user-secret fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/categories/" id="Categories"
              ><em class="fas fa-folder-open fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/tags/" id="Tags"
              ><em class="fas fa-tags fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/search/" id="Search"
              ><em class="fas fa-search fa-lg"></em
            ></a>
          </li>
          
      
    </ul>
  </div>
</nav>

    <div class="intro-header">
      <div class="container">
        <div class="post-heading">
          
            <h1>
              special symbol
            </h1>
          
          
            <span class="meta-post">
  <em class="fa fa-calendar-alt"></em
  >&nbsp;Aug 31, 2017
  
    &nbsp;&nbsp;&nbsp;<em class="fa fa-folder-open"></em>&nbsp;
    
      <a
        href="https://yusbk.github.io/categories/my/"
        >my</a
      >&nbsp;
    
      <a
        href="https://yusbk.github.io/categories/r/"
        >R</a
      >&nbsp;
    
      <a
        href="https://yusbk.github.io/categories/dt/"
        >DT</a
      >&nbsp;
    
  
</span>

          
        </div>
      </div>
    </div>
  </header>
  

    
  <div class="container" role="main">
    <article class="article" class="blog-post">
      
  <!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<ul>
<li><a href="#dot-n">.N</a></li>
<li><a href="#mult">Mult</a></li>
<li><a href="#dot-sd-dan-dot-sdcols">.SD dan .SDcols</a></li>
<li><a href="#dot-i">.I</a></li>
<li><a href="#dot-grp-dan-rleid">.GRP dan rleid</a></li>
<li><a href="#contoh-dari-manual">Contoh dari manual</a></li>
</ul>
<!-- raw HTML omitted -->
<p>Hari ni bersempena <strong>Hari kemerdekaan</strong> Malaysia ada masa untuk ulang kaji pakej
<!-- raw HTML omitted -->data.table<!-- raw HTML omitted -->. Hari ni ialah mengenai <strong>Special Symbol</strong> seperti <code>.N, .I, .GRP, .BY</code>.
Penerangan ini diambil dari manual di <code>data.table</code> tetapi diedit sedikit. Untuk
rujukan di <a href="https://jangorecki.gitlab.io/data.cube/library/data.table/html/special-symbols.html">sini</a>.</p>
<p>Ini data yang dipakai untuk membuat contoh:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  DT <span style="color:#f92672">=</span> <span style="color:#a6e22e">data.table</span>(x<span style="color:#f92672">=</span><span style="color:#a6e22e">rep</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>),each<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>), v<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>), y<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">8</span>), a<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">9</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">9</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>)
  X <span style="color:#f92672">=</span> <span style="color:#a6e22e">data.table</span>(x<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;c&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>), v<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span><span style="color:#f92672">:</span><span style="color:#ae81ff">7</span>, foo<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>))
</code></pre></div><h2 id="dot-n">.N</h2>
<p>Penggunaan <code>.N</code> selain dari untuk mendapatkan jumlah baris di dataset, <code>.N</code> boleh juga
digunakan untuk melihat barisan terakhir di dataset. Untuk melihat barisan pertama
guna <code>DT[1]</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  DT[.N] <span style="color:#75715e"># last row, only special symbol allowed in &#39;i&#39; - nesten som Total</span>
  DT[, .N] <span style="color:#75715e"># total number of rows in DT</span>
  DT[, .N, by<span style="color:#f92672">=</span>x] <span style="color:#75715e"># number of rows in each group</span>
</code></pre></div><h2 id="mult">Mult</h2>
<p>Contoh untuk penggunaan <code>mult</code> (<em>multiple rows</em>) adalah seperti di bawah. Penggunaan
fungsi mult ialah untuk menetapkan kombinasi barisan yang ingin ditunjukkan samada
&ldquo;all&rdquo;, &ldquo;first&rdquo; atau &ldquo;last&rdquo;. Variable <code>x</code> dan <code>y</code> boleh disusun dengan menggunakan
<code>setkey(DT, x, y)</code>. Sekiranya tidak disusun terlebih dahulu sebelum dipakai maka harus
menggunakan fungsi <code>on</code> seperti contoh di bawah.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## contoh data</span>
  dt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.table</span>(x <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">7</span>),
                   y <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">6</span>))

  <span style="color:#a6e22e">setkey</span>(dt, x)

  <span style="color:#75715e">## dapatkan kombinasi yang unik</span>
  udt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">unique</span>(dt)

  <span style="color:#75715e">## buat kolom dengan nilai 0</span>
  dt[, <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;first&#34;</span>, <span style="color:#e6db74">&#34;last&#34;</span>) <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0L</span>][]
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">     x y first last
  1: 1 1     0    0
  2: 1 2     0    0
  3: 1 2     0    0
  4: 3 3     0    0
  5: 7 6     0    0
</code></pre></div><p>Menggunakan <code>mult</code> untuk menetapkan kombinasi unik yang diingini. Pemakaian <code>&quot;first&quot;</code>
menunjukkan kombinasi pertama sahaja. Sekiranya kombinasi yang sama terdapat
dipelbagai baris, hanya barisan yang pertama dimana kombinasi tersebut ditemui akan
dipilih. Pemakaian <code>&quot;last&quot;</code> memilih barisan terakhir dimana kombinasi yang diingini ditemui.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## Sekiranya kombinasi x,y yang pertama terdapat</span>
  <span style="color:#75715e">## di data masukkan 1 di kolom &#34;first&#34;</span>
  dt[udt, first <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1L</span>, on <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;x&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;first&#34;</span>][]

  <span style="color:#75715e">## Sekiranya kombinasi x,y yang terakhir terdapat</span>
  <span style="color:#75715e">## di data masukkan nilai 1 di kolom &#34;last&#34;</span>
  dt[udt, last <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1L</span>, on <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;x&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;last&#34;</span>][]
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">     x y first last
  1: 1 1     1    1
  2: 1 2     1    0
  3: 3 3     1    1
  4: 1 2     0    1
  5: 7 6     1    1
</code></pre></div><p>Contoh di bawah menunjukkan cara sekiranya hanya ingin mendapatkan index
kombinasi yang diingini sahaja.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## Untuk lihat indeks bagi kombinasi yang unik sahaja</span>
  dt<span style="color:#a6e22e">[unique</span>(dt), on <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;x&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;first&#34;</span>, which <span style="color:#f92672">=</span> <span style="color:#66d9ef">TRUE</span>]

  [1] <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">5</span>
</code></pre></div><p>Contoh lain menggunakan <code>mult</code>. Seperti kajian isi rumah (<em>household</em>) dimana &ldquo;id&rdquo;
mewakili rumah. Semua ahli keluarga mempunyai id-rumah sama. Sekiranya ingin
mencari ahli termuda atau tertua fungsi <code>mult</code> dapat memudahkan proses.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#a6e22e">set.seed</span>(<span style="color:#ae81ff">1234</span>)
  dt <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.table</span>(id <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">10</span>, <span style="color:#66d9ef">TRUE</span>),
                   umur <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">20</span><span style="color:#f92672">:</span><span style="color:#ae81ff">35</span>, <span style="color:#ae81ff">10</span>, <span style="color:#66d9ef">TRUE</span>),
                   jentina <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">10</span>, <span style="color:#66d9ef">TRUE</span>),
                   kode <span style="color:#f92672">=</span> <span style="color:#a6e22e">sample</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">2</span>, <span style="color:#66d9ef">TRUE</span>))

  <span style="color:#75715e">## Susun umur mengikut id</span>
  <span style="color:#a6e22e">setkey</span>(dt, id, umur)

  <span style="color:#75715e">## first ialah id yang sama ahli yang paling muda</span>
  dt<span style="color:#a6e22e">[unique</span>(dt), muda <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1L</span>, on <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(id), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;first&#34;</span>][]

  <span style="color:#75715e">## Pilih yang terakhir dari id yang sama - cth utk pilih ahli tertua</span>
  <span style="color:#75715e">## sekiranya tidak pakai list di &#39;on = list(nama-var)&#39; boleh pakai &#34;nama-var&#34;.</span>
  dt<span style="color:#a6e22e">[unique</span>(dt), tua <span style="color:#f92672">:=</span> <span style="color:#a6e22e">as.integer</span>(<span style="color:#ae81ff">1L</span>), on <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;id&#34;</span>, mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;last&#34;</span>, by <span style="color:#f92672">=</span> .(umur)][]

  <span style="color:#75715e">## pilih nilai pertama untuk setiap kombinasi unik antara &#39;id&#39; dan &#39;kode&#39;</span>
  dt<span style="color:#a6e22e">[unique</span>(dt[, <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;id&#34;</span>, <span style="color:#e6db74">&#34;kode&#34;</span>)]), KodePertama <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1L</span>, on <span style="color:#f92672">=</span> <span style="color:#a6e22e">list</span>(id, kode), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;first&#34;</span>][]

  <span style="color:#75715e">## pilih nilai terakhir untuk setiap kombinasi unik antara &#39;id&#39; dan &#39;kode&#39;</span>
  dt<span style="color:#a6e22e">[unique</span>(dt[, <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;id&#34;</span>, <span style="color:#e6db74">&#34;kode&#34;</span>)]), KodeAkhir <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1L</span>, on <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;id&#34;</span>, <span style="color:#e6db74">&#34;kode&#34;</span>), mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;last&#34;</span>][]
</code></pre></div><p>Hasilnya dari contoh pemilihan ahli yang paling muda dan tua dari data di atas
menggunakan <code>&quot;first&quot;</code> dan <code>&quot;last&quot;</code>. Pemakaian <code>unique(dt)</code> berasaskan dari penetapan yang dibuat
di fungsi <code>setkey</code> dimana data disusun mengikut <code>id</code> kemudian <code>umur</code> terlebih dahulu.</p>
<p>Sekiranya pemilihan kombinasi unik berasaskan kolom lain, selain dari <code>id</code> dan <code>umur</code>
yang telah ditetapkan, pemilihan kolom unik boleh dibuat secara fungsi asas
menggunakan <code>unique(dt[, c(&quot;kol1&quot;, &quot;kol2&quot;)])</code>. Penggunaan <code>on</code> boleh memakai cara
<code>list</code> atau <code>concatenate</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">       id umur jentina kode muda tua KodePertama KodeAkhir
   1:  1   24       2    3    1  NA           1        NA
   2:  1   24       2    2   NA  NA           1         1
   3:  1   31       1    3   NA   1          NA         1
   4:  3   22       2    3    1  NA           1        NA
   5:  3   23       1    2   NA  NA           1        NA
   6:  3   24       1    3   NA  NA          NA         1
   7:  3   28       1    2   NA  NA          NA        NA
   8:  3   33       2    2   NA  NA          NA        NA
   9:  3   34       1    2   NA   1          NA         1
  10:  4   24       1    3    1   1           1         1
</code></pre></div><h2 id="dot-sd-dan-dot-sdcols">.SD dan .SDcols</h2>
<p>Penggunaan <code>.SD</code> juga boleh berasaskan <em>indeks barisan</em>. Contoh untuk menggunakan <code>.SDcols</code>
seperti di bawah termasuk menggunakan fungsi <code>lapply</code>. Tetapi penggunaan <code>&quot;.SD&quot;</code> adalah
lebih lambat berbanding menggunakan fungsi <code>&quot;on&quot;</code> seperti di atas.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e"># pilih kolom &#39;x&#39; dan &#39;y&#39;</span>
  DT[, .SD, .SDcols <span style="color:#f92672">=</span> x<span style="color:#f92672">:</span>y]
  <span style="color:#75715e"># baris pertama di semua kolom</span>
  DT[, .SD[1]]
  <span style="color:#75715e"># baris pertama di &#39;y&#39; dan &#39;v&#39; untuk setiap kumpulan di &#39;x&#39;</span>
  DT[, .SD[1], by <span style="color:#f92672">=</span> x]
  <span style="color:#75715e"># get rows *and* sum all col</span>
  DT[, <span style="color:#a6e22e">c</span>(.N, <span style="color:#a6e22e">lapply</span>(.SD, sum)), by <span style="color:#f92672">=</span> x]
  <span style="color:#75715e"># get rows *and* sum columns &#39;v&#39; and &#39;y&#39; by group</span>
  DT[, <span style="color:#a6e22e">c</span>(.N, <span style="color:#a6e22e">lapply</span>(.SD, sum)), by <span style="color:#f92672">=</span> x, .SDcol <span style="color:#f92672">=</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;v&#34;</span>, <span style="color:#e6db74">&#34;y&#34;</span>)]
</code></pre></div><h2 id="dot-i">.I</h2>
<p>Untuk dapatkan <em>indeks barisan</em> simbol <code>.I</code> boleh dipakai. Hanya vektor untuk indeks
barisan yang akan diberikan dan tidak nilai di indeks tersebut. Fungsinya sama
seperti <code>seq_len(nrow(x))</code>. Semasa penggumpulan dibuat, pada masa yang sama
penggumpulan dilakukan di dalam kumpulan yang ditetapkan. Sesuai digunakan untuk
membuat <em>subset</em> di <code>j</code> seperti: <code>DT[,.I[which.max(somecol)], by=grp]</code>. Penggunaannya
same seperti fungsi <code>which</code> di base.</p>
<p>Cara lain boleh digunakan untuk membuat indentity atau ID. <code>DT[, id := .I]</code>
seperti menggunakan <code>DT[, id := seq_len(.N)</code></p>
<p>Pemakaian <code>.I[1]</code> contohny digunakan untuk mendapatkan index dimana nilai pertama
bagi setiap kumpulan di <code>x</code>. Untuk kumpulan <code>b</code> di kolom <code>x</code>, nilai pertama ialah di
barisan <strong>1</strong>, nilai pertama bagi kumpulan <code>a</code> di kolom <code>x</code> ialah di barian ke <strong>4</strong> dan
nilai pertama kumpulan <code>c</code> di barisan ke <strong>7</strong>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  DT
     x v y a b
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">9</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">7</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">6</span>
  <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">5</span>
  <span style="color:#ae81ff">6</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">4</span>
  <span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">9</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">9</span> <span style="color:#ae81ff">1</span>

  DT[, .I[1], by <span style="color:#f92672">=</span> x] <span style="color:#75715e"># first row number in DT corresponding to each group</span>

     x V1
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> b  <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> a  <span style="color:#ae81ff">4</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> c  <span style="color:#ae81ff">7</span>

  DT[, .(index <span style="color:#f92672">=</span> .I[1]), by <span style="color:#f92672">=</span> x] <span style="color:#75715e"># Namakan variable untuk index</span>

     x index
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">4</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">7</span>     <span style="color:#ae81ff">5</span>
</code></pre></div><p>Untuk dapatkan index bagi nilai maksimum mengikut kumpulan di kolom <code>x</code> boleh dibuat
seperti cara di bawah.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  DT[, .I<span style="color:#a6e22e">[which.max</span>(y)], by <span style="color:#f92672">=</span> x] <span style="color:#75715e"># which row number with the max &#39;y&#39; by &#39;x&#39;</span>

     x V1
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> b  <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> a  <span style="color:#ae81ff">5</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> c  <span style="color:#ae81ff">9</span>
</code></pre></div><h2 id="dot-grp-dan-rleid">.GRP dan rleid</h2>
<p>Untuk mengkaji menggikut kumpulan secara penyusunan.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  DT[, grp <span style="color:#f92672">:=</span> .GRP, by <span style="color:#f92672">=</span> x][] <span style="color:#75715e"># add a group counter</span>

     x v y a b grp
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">9</span>   <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span>   <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">7</span>   <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">6</span>   <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">5</span>   <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">6</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">4</span>   <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">3</span>   <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">9</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">9</span> <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">3</span>

  DT[, .N, by <span style="color:#f92672">=</span> <span style="color:#a6e22e">rleid</span>(v)] <span style="color:#75715e"># get count of consecutive runs of &#39;v&#39;</span>

     rleid N
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">2</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">2</span>

  DT[, <span style="color:#a6e22e">c</span>(.(ym <span style="color:#f92672">=</span> <span style="color:#a6e22e">max</span>(y)), <span style="color:#a6e22e">lapply</span>(.SD, min)), by <span style="color:#f92672">=</span> <span style="color:#a6e22e">rleid</span>(v), .SDcols <span style="color:#f92672">=</span> v<span style="color:#f92672">:</span>b] <span style="color:#75715e"># compute &#39;j&#39; for each consecutive runs of &#39;v&#39;</span>

     rleid ym v y a b
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">7</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span>     <span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">1</span>
</code></pre></div><p>Untuk gabungkan dua dataset. Tapi cara ini masih tidak difahami :-(</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  X

     x v foo
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">8</span>   <span style="color:#ae81ff">4</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">7</span>   <span style="color:#ae81ff">2</span>

  <span style="color:#75715e">## need more info for this</span>
  X[, DT[.BY, y, on <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;x&#34;</span>], by <span style="color:#f92672">=</span> x] <span style="color:#75715e"># join within each group</span>

     x V1
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> c  <span style="color:#ae81ff">6</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> c  <span style="color:#ae81ff">3</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> c  <span style="color:#ae81ff">7</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> b  <span style="color:#ae81ff">1</span>
  <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span> b  <span style="color:#ae81ff">6</span>
  <span style="color:#ae81ff">6</span><span style="color:#f92672">:</span> b  <span style="color:#ae81ff">3</span>
</code></pre></div><p>Untuk tukar nilai bagi setiap barisan pertama di kumpulan yang sama. Ini biasanya
dipakai contohnya bila membuat kajian keluarga dan ingin memberikan kod tertentu yang
membezakan keluarga 1 dan 2 dsb.</p>
<p>Cara ini tidak <strong>hard code</strong> data. Kolom <code>c</code> tidak dimasukkan ke data dan hanya
disimpan di <em>memory</em> sahaja. Untuk simpan harus <em>assign to save object</em> atau gunakan cara <code>mult</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## Recode to 99 for first row in each group by x</span>
  DT[, {vDT <span style="color:#f92672">=</span> <span style="color:#a6e22e">copy</span>(.SD) <span style="color:#75715e">#kopi semua kolom</span>
        vDT[1, c <span style="color:#f92672">:=</span> <span style="color:#ae81ff">99</span>] <span style="color:#75715e">#buat kolom C row pertama nilai 99</span>
        vDT},
        by <span style="color:#f92672">=</span> x]

     x v y a b grp  c
  <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">9</span>   <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">99</span>
  <span style="color:#ae81ff">2</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span>   <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">NA</span>
  <span style="color:#ae81ff">3</span><span style="color:#f92672">:</span> b <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">7</span>   <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">NA</span>
  <span style="color:#ae81ff">4</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">6</span>   <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">99</span>
  <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">5</span> <span style="color:#ae81ff">5</span>   <span style="color:#ae81ff">2</span> <span style="color:#66d9ef">NA</span>
  <span style="color:#ae81ff">6</span><span style="color:#f92672">:</span> a <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">4</span>   <span style="color:#ae81ff">2</span> <span style="color:#66d9ef">NA</span>
  <span style="color:#ae81ff">7</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">6</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">3</span>   <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">99</span>
  <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">8</span> <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">NA</span>
  <span style="color:#ae81ff">9</span><span style="color:#f92672">:</span> c <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">7</span> <span style="color:#ae81ff">9</span> <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">3</span> <span style="color:#66d9ef">NA</span>

  DT<span style="color:#a6e22e">[unique</span>(x), d<span style="color:#f92672">:=</span><span style="color:#ae81ff">99</span>, on <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;x&#34;</span>, mult <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;first&#34;</span>][]
</code></pre></div><h2 id="contoh-dari-manual">Contoh dari manual</h2>
<p>Ini ialah contoh dan penerangan dari manual sekiranya penerangan diatas tidak difahami.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">  <span style="color:#75715e">## Not run:</span>
  DT <span style="color:#f92672">=</span> <span style="color:#a6e22e">data.table</span>(x<span style="color:#f92672">=</span><span style="color:#a6e22e">rep</span>(<span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;b&#34;</span>,<span style="color:#e6db74">&#34;a&#34;</span>,<span style="color:#e6db74">&#34;c&#34;</span>),each<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>), v<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">2</span>), y<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">6</span>), a<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">9</span>, b<span style="color:#f92672">=</span><span style="color:#ae81ff">9</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>)
  DT
  X <span style="color:#f92672">=</span> <span style="color:#a6e22e">data.table</span>(x<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;c&#34;</span>,<span style="color:#e6db74">&#34;b&#34;</span>), v<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span><span style="color:#f92672">:</span><span style="color:#ae81ff">7</span>, foo<span style="color:#f92672">=</span><span style="color:#a6e22e">c</span>(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">2</span>))
  X

  DT[.N]                                 <span style="color:#75715e"># last row, only special symbol allowed in &#39;i&#39;</span>
  DT[, .N]                               <span style="color:#75715e"># total number of rows in DT</span>
  DT[, .N, by<span style="color:#f92672">=</span>x]                         <span style="color:#75715e"># number of rows in each group</span>
  DT[, .SD, .SDcols<span style="color:#f92672">=</span>x<span style="color:#f92672">:</span>y]                 <span style="color:#75715e"># select columns &#39;x&#39; and &#39;y&#39;</span>
  DT[, .SD[1]]                           <span style="color:#75715e"># first row of all columns</span>
  DT[, .SD[1], by<span style="color:#f92672">=</span>x]                     <span style="color:#75715e"># first row of &#39;y&#39; and &#39;v&#39; for each group in &#39;x&#39;</span>
  DT[, <span style="color:#a6e22e">c</span>(.N, <span style="color:#a6e22e">lapply</span>(.SD, sum)), by<span style="color:#f92672">=</span>x]    <span style="color:#75715e"># get rows *and* sum all columns by group</span>
  DT[, .I[1], by<span style="color:#f92672">=</span>x]                      <span style="color:#75715e"># row number in DT corresponding to each group starting point</span>
  DT[, .N, by<span style="color:#f92672">=</span><span style="color:#a6e22e">rleid</span>(v)]                  <span style="color:#75715e"># get count of consecutive runs of &#39;v&#39;</span>
  DT[, <span style="color:#a6e22e">c</span>(.(y<span style="color:#f92672">=</span><span style="color:#a6e22e">max</span>(y)), <span style="color:#a6e22e">lapply</span>(.SD, min)),
          by<span style="color:#f92672">=</span><span style="color:#a6e22e">rleid</span>(v), .SDcols<span style="color:#f92672">=</span>v<span style="color:#f92672">:</span>b]      <span style="color:#75715e"># compute &#39;j&#39; for each consecutive runs of &#39;v&#39;</span>
  DT[, grp <span style="color:#f92672">:=</span> .GRP, by<span style="color:#f92672">=</span>x]                <span style="color:#75715e"># add a group counter</span>
  X[, DT[.BY, y, on<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;x&#34;</span>], by<span style="color:#f92672">=</span>x]          <span style="color:#75715e"># join within each group</span>

  <span style="color:#75715e">## End(Not run)</span>
</code></pre></div>



      
    </article>
    
      <script>
  document.addEventListener('scroll', function () {
    if (
      document.body.scrollTop > 50 ||
      document.documentElement.scrollTop > 50
    ) {
      document.getElementById('backtotopButton').style.opacity = '1'
      document.getElementById('backtotopButton').style.transition = '0.5s'
    } else {
      document.getElementById('backtotopButton').style.opacity = '0'
      document.getElementById('backtotopButton').style.transition = '0.5s'
    }
  })

  function topFunction() {
    document.body.scrollTop = 0 
    document.documentElement.scrollTop = 0 
  }
</script>

      <button onclick="topFunction()" id="backtotopButton">
        <em class="fa fa-angle-up"></em>
      </button>
    
    
      
  <div id="disqus_thread"></div>
  <script type="text/javascript">
        (function() {
            
            
            if (window.location.hostname == "localhost") return;

            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            var disqus_shortname = 'yusbk-github-io';
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
  <noscript
    >Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript"
      >comments powered by Disqus.</a
    ></noscript
  >
  <a href="https://disqus.com/" class="dsq-brlink"
    >comments powered by <span class="logo-disqus">Disqus</span></a
  >


    
  </div>

    <footer>
  

<div class="social-icons">
  
    
    
      
      <a href="https://twitter.com/GoHugoIO" name="twitter">
        <em class="fab fa-twitter"></em>
      </a>
    
  

  
</div>


  
  <div class="container">
    <p class="credits copyright">
      <a href="https://yusbk.github.io/about">Yusman Kamaleri</a>
      &nbsp;&copy;
      2021
      
        &nbsp;/&nbsp;
        <a href="https://yusbk.github.io/">ùîÇùìæùìºùì¥ùì™ùì∂</a>
      
      &nbsp;&ndash;&nbsp;
      <em class="fas fa-moon" id="dark-mode-toggle"></em>
    </p>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
  </div>
</footer>

  </body>
</html>
