<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<title>Pilih kolom cara indeks atau nama kolom</title>


  



<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="alternate" type="application/rss+xml" href="https://yusbk.github.io/index.xml" title="ყųʂƙąɱ">

<link id="dark-mode-theme" rel="stylesheet" href="https://yusbk.github.io/css/dark.css" />
<link rel="stylesheet" href="https://yusbk.github.io/fontawesome/css/all.min.css" />

<script src="https://yusbk.github.io/js/bundle.js"></script>
<script src="https://yusbk.github.io/js/instantpage.js" type="module" defer></script>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<meta name="generator" content="Hugo 0.84.0" />
  </head>
  <body>
    
  




  <header>
    <nav class="navbar">
  <div class="nav">
    
        <a href="https://yusbk.github.io/" class="nav-logo">
        <img
          src="https://yusbk.github.io/images/yk.png"
          width="40"
          height="40"
          alt="Logo"
        />
        </a>
    

    <ul class="nav-links">
      
        
          <li>
            <a href="/about/" id="About"
              ><em class="fas fa-user-secret fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/categories/" id="Categories"
              ><em class="fas fa-folder-open fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/tags/" id="Tags"
              ><em class="fas fa-tags fa-lg"></em
            ></a>
          </li>
          
      
        
          <li>
            <a href="/search/" id="Search"
              ><em class="fas fa-search fa-lg"></em
            ></a>
          </li>
          
      
    </ul>
  </div>
</nav>

    <div class="intro-header">
      <div class="container">
        <div class="post-heading">
          
            <h1>
              Pilih kolom cara indeks atau nama kolom
            </h1>
          
          
            <span class="meta-post">
  <em class="fa fa-calendar-alt"></em
  >&nbsp;Jul 17, 2017
  
    &nbsp;&nbsp;&nbsp;<em class="fa fa-folder-open"></em>&nbsp;
    
      <a href="https://yusbk.github.io/categories/r/">R</a
      >&nbsp;
    
      <a href="https://yusbk.github.io/categories/my/">my</a
      >&nbsp;
    
      <a href="https://yusbk.github.io/categories/dt/">DT</a
      >&nbsp;
    
  
</span>

          
        </div>
      </div>
    </div>
  </header>
  

    
  <div class="container" role="main">
    <article class="article" class="blog-post">
      
  <p>Bila memakai pakej <code>data.table</code> untuk membuat fungsi sebagai kode R, pemilihan kolom boleh dibuat dengan menetapkan nama kolom atau indeks kolom. Akan tetapi pemakaian indeks untuk memilih kolom tidak disarankan kerana ia akan mengakibatkan kode susah untuk difahami. Selain itu sekiranya ada kesilapan kode disebabkan indeks yang merujuk kolom yang tidak diingini, mesej amaran tidak akan diberikan. Oleh itu adalah disarankan untuk memakai nama kolom berbanding indeks kolom.</p>
<p>Walaubagaimanapun, sekiranya masih ingin memakai indeks kolom juga atas sebab-sebab tertentu, terdapat tiga cara yang boleh dipakai. Baca seterusnya untuk dapatkan penerangan.</p>
<h1 id="nama-kolom">Nama kolom</h1>
<p>Untuk memilih kolom berasaskan nama kolom, boleh memakai <code>get</code> untuk satu kolom atau <code>mget</code> untuk memilih pelbagai kolom <em>(multiple get)</em>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R"><span style="color:#a6e22e">library</span>(data.table)
DT <span style="color:#f92672">=</span> <span style="color:#a6e22e">data.table</span>(A <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">6</span>, B <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>, C <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>)

<span style="color:#75715e">## Cara asas</span>
DT[B <span style="color:#f92672">==</span> <span style="color:#ae81ff">4</span>, ]

<span style="color:#75715e">## Pakai objek</span>
var <span style="color:#f92672">&lt;-</span> <span style="color:#e6db74">&#34;B&#34;</span>
value <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">4</span>

DT<span style="color:#a6e22e">[get</span>(var) <span style="color:#f92672">==</span> value, ]

<span style="color:#75715e">## pilih pelbagai kolom</span>
vars <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;A&#34;</span>, <span style="color:#e6db74">&#34;B&#34;</span>)
DT[, <span style="color:#a6e22e">mget</span>(vars)] <span style="color:#75715e">#cara mget</span>
</code></pre></div><p>Sekiranya memakai <code>get</code> untuk memilih pelbagai kolom akan hanya menghasilkan vektor kolom pertama dan bukan data.table kolom A dan B.</p>
<h1 id="indeks">Indeks</h1>
<p>Untuk memilih hanya satu kolom sahaja, caranya:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R"><span style="color:#a6e22e">library</span>(data.table)
DT <span style="color:#f92672">=</span> <span style="color:#a6e22e">data.table</span>(A <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">6</span>, B <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span><span style="color:#f92672">:</span><span style="color:#ae81ff">3</span>, C <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span><span style="color:#f92672">:</span><span style="color:#ae81ff">10</span>)

<span style="color:#75715e">## pilih kolom 2 (B) yang nilainya bersamaan 4</span>
DT<span style="color:#a6e22e">[.</span>(<span style="color:#ae81ff">4</span>), on <span style="color:#f92672">=</span> <span style="color:#a6e22e">names</span>(DT)[2]] <span style="color:#75715e">#cara 1</span>
DT[DT[[2]] <span style="color:#f92672">==</span> <span style="color:#ae81ff">4</span>] <span style="color:#75715e">#cara 2</span>
DT[DT[, .I[.SD <span style="color:#f92672">==</span> <span style="color:#ae81ff">4</span>], .SDcols <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>]] <span style="color:#75715e">#cara 3</span>

<span style="color:#75715e">## sebagai objek</span>
var <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">2</span>
value <span style="color:#f92672">&lt;-</span> <span style="color:#ae81ff">4</span>

DT<span style="color:#a6e22e">[.</span>(value), on <span style="color:#f92672">=</span> <span style="color:#a6e22e">names</span>(DT)[var]] <span style="color:#75715e">#cara 1</span>
DT[DT[[var]] <span style="color:#f92672">==</span> value] <span style="color:#75715e">#cara 2</span>
DT[DT[, .I[.SD <span style="color:#f92672">==</span> value], .SDcols <span style="color:#f92672">=</span> var]] <span style="color:#75715e">#cara 3</span>


<span style="color:#75715e">## indeks kolom guna fungsi grep atau which</span>
vari <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">grep</span>(<span style="color:#e6db74">&#34;B&#34;</span>, <span style="color:#a6e22e">colnames</span>(DT))
vari <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">names</span>(DT) <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;B&#34;</span>) <span style="color:#75715e">#cara ini lebih laju</span>

DT<span style="color:#a6e22e">[.</span>(<span style="color:#ae81ff">4</span>), on <span style="color:#f92672">=</span> <span style="color:#a6e22e">names</span>(DT)[vari]]
</code></pre></div><p>Hasilnya untuk kode-kode di atas adalah seperti ini:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">A B C
<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">4</span> <span style="color:#ae81ff">5</span>
</code></pre></div><p>Penggunaan <code>.()</code> di <code>i</code> stuktur <em>data.table</em> <code>DT[i, j, by]</code> adalah alias untuk penggunaan <code>list()</code>. Fungsi ini sama seperti cara 1 di atas.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">DT<span style="color:#a6e22e">[list</span>(<span style="color:#ae81ff">4</span>), on <span style="color:#f92672">=</span> <span style="color:#a6e22e">names</span>(DT)[2]]
</code></pre></div><p>Sekiranya ingin pakai index untuk di fungsi <code>by</code> adalah seperti di bawah. Cara ini ialah untuk mengira jumlah huruf-huruf i kolom A.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">DT1 <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">data.table</span>(A <span style="color:#f92672">=</span> <span style="color:#66d9ef">letters</span>[1<span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>], B <span style="color:#f92672">=</span> <span style="color:#a6e22e">rep</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">13</span>))

<span style="color:#75715e">## dapatkan index kolom menggunakan &#39;grep&#39;</span>
ind <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">grep</span>(<span style="color:#e6db74">&#34;A&#34;</span>, <span style="color:#a6e22e">names</span>(DT1))
<span style="color:#75715e">## atau menggunakan &#39;which&#39;</span>
ind <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">which</span>(<span style="color:#a6e22e">names</span>(DT1) <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;A&#34;</span>)
<span style="color:#75715e">## note - guna &#39;which&#39; lebih pantas dari &#39;grep&#39;</span>

<span style="color:#75715e">## jumlah setiap huruf</span>
DT1[, .N, by <span style="color:#f92672">=</span> DT1[[ind]]]
</code></pre></div><p>Hasilnya</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R">   DT1 N
<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span>   a <span style="color:#ae81ff">3</span>
<span style="color:#ae81ff">2</span><span style="color:#f92672">:</span>   b <span style="color:#ae81ff">3</span>
<span style="color:#ae81ff">3</span><span style="color:#f92672">:</span>   c <span style="color:#ae81ff">3</span>
<span style="color:#ae81ff">4</span><span style="color:#f92672">:</span>   d <span style="color:#ae81ff">2</span>
<span style="color:#ae81ff">5</span><span style="color:#f92672">:</span>   e <span style="color:#ae81ff">2</span>
</code></pre></div>



      
        <div class="blog-tags">
          
            <a href="https://yusbk.github.io/tags/indeks/">indeks</a
            >&nbsp;
          
            <a href="https://yusbk.github.io/tags/mget/">mget</a
            >&nbsp;
          
            <a href="https://yusbk.github.io/tags/get/">get</a
            >&nbsp;
          
        </div>
      
    </article>
    
    
      
  <div id="disqus_thread"></div>
  <script type="text/javascript">
        (function() {
            
            
            if (window.location.hostname == "localhost") return;

            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            var disqus_shortname = 'yusbk-github-io';
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
  <noscript
    >Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript"
      >comments powered by Disqus.</a
    ></noscript
  >
  <a href="https://disqus.com/" class="dsq-brlink"
    >comments powered by <span class="logo-disqus">Disqus</span></a
  >


    
  </div>

    <footer>
  
  <div>
    
      <a href="https://twitter.com/GoHugoIO" name="twitter"
        ><em class="fab fa-twitter"></em
      ></a>
    




  
  <div class="container">
    <p class="credits copyright">
      <a href="https://yusbk.github.io/about">Yusman Kamaleri</a>
      &nbsp;&copy;
      2021
      
        &nbsp;/&nbsp;
        <a href="https://yusbk.github.io/">ყųʂƙąɱ</a>
      
      &nbsp;&ndash;&nbsp;
      <em class="fas fa-moon" id="dark-mode-toggle"></em>
    </p>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
  </div>
</footer>

  </body>
</html>
